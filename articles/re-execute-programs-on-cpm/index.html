<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Re-execute Programs in Memory on CP/M</title>
  <meta name="description" content="After a transient program terminates on CP/M it's often possible to re-execute it  in memory without having to reload it from disk.  This is a great little trick">
  <meta name="keywords" content="Retro Vintage Programming Tinkering"/>

  <!-- *** Twitter Card *** -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@techtinkering">
  <meta name="twitter:title" content="Re-execute Programs in Memory on CP/M">
  <meta name="twitter:description" content="After a transient program terminates on CP/M it's often possible to re-execute it  in memory without having to reload it from disk.  This is a great little trick">
    <meta name="twitter:image"
         content="https://techtinkering.com/img/social_images/cpm_re-execute_programs.png">
  <!-- *** Twitter Card *** -->

  <!-- *** Open Graph *** --->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Re-execute Programs in Memory on CP/M">
  <meta property="og:description" content="After a transient program terminates on CP/M it's often possible to re-execute it  in memory without having to reload it from disk.  This is a great little trick">
  <meta property="og:url" content="https://techtinkering.com/articles/re-execute-programs-on-cpm/">
    <meta property="og:image"
         content="https://techtinkering.com/img/social_images/cpm_re-execute_programs.png">
  <!-- *** Open Graph *** --->

  <script>
    console.log('timeZone: '+Intl.DateTimeFormat().resolvedOptions().timeZone);
    function isUserFromUK() {
      return Intl.DateTimeFormat().resolvedOptions().timeZone == "Europe/London";
    }
  </script>

  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/article.css" rel="stylesheet">
  <link rel="canonical" href="https://techtinkering.com/articles/re-execute-programs-on-cpm/">
  <link rel="alternate" type="application/atom+xml" title="TechTinkering - Retro Computers, Programming, General Technical Tinkering"
        href="https://techtinkering.com/feed.xml" />

	<!-- ****** faviconit.com favicons ****** -->
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<!-- ****** faviconit.com favicons ****** -->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

</head>
  <body>
    <nav>
  <div class="container">
    <div class="navbar-header">
      <a href="/">TechTinkering</a><br />
      =============
    </div>

    <div class="contact">
      <ul>
        <li>
          <a href="https://twitter.com/TechTinkering" title="@TechTinkering on Twitter">Twitter</a>
        </li>
        <li>
          <a href="https://youtube.com/techtinkering" title="TechTinkering's YouTube Channel">YouTube</a>
        </li>
        <li>
          <a href="/feed.xml" title="Subscribe to our Atom Feed">Feed</a>
        </li>
        <li>
          <a href="mailto:techtinkeringuk@gmail.com" title="Email us, we'd love to hear from you">Email</a>
        </li>
        <li>
          <a href="/useful-links/" title="Useful vintage computer links">Useful Links</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div id="content" class="container">
      <div class="margin-buffer">
    <article itemscope itemtype="http://schema.org/BlogPosting">
    <meta itemprop="image"
         content="https://techtinkering.com/img/social_images/cpm_re-execute_programs.png" />
      <header>
        <a href="/articles/re-execute-programs-on-cpm/" title="Re-execute Programs in Memory on CP/M">
          <h1 itemprop="headline name">Re-execute Programs in Memory on CP/M</h1>
        </a>
        <div>
            <time itemprop="datePublished"
                  datetime="2021-01-11">
              11 January 2021
            </time>
          <span itemscope itemprop="publisher"
                itemtype="http://schema.org/Organization">
            <meta itemprop="name" content="TechTinkering" />
            <meta itemprop="url" content="https://techtinkering.com" />
          </span>
          <span itemscope itemprop="author" itemtype="http://schema.org/Person">
            <a rel="author" itemprop="url" href="https://lawrencewoodman.github.io">
              <span itemprop="name">Lawrence Woodman</span>
            </a>
          </span>

          <ul class="tags">
              <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
              <li>#<a href="/articles/tag/retro/">Retro</a></li>
          </ul>
        </div>
      </header>

        <div itemprop="articleBody">
        <p>After a transient program terminates on CP/M it's often possible to re-execute it  in memory without having to reload it from disk.  This is a great little trick if using slow disks as it's much quicker to just jump back into memory.  It's also useful because it could prevent you from losing work if you exited a program without saving.</p>
<h2>Creating the Re-execute Command</h2>
<p>The re-execute command is the smallest possible command.  It is simply an empty .COM file.  We can easily create an empty file called 'RERUN.COM' using the resident 'SAVE' command:</p>
<pre><code>SAVE 0 RERUN.COM
</code></pre>
<h2>Using the Re-execute Command</h2>
<img src="/img/articles/cpm_memory_layout_tpa_ccp.png" class="img-right" style="width: 500px; clear: right;" title="CP/M Memory Layout">
<p>Under CP/M, programs that load from disk are referred to as <em>Transient Programs</em> and these run in an area of memory called the <em>Transient Program Area (TPA)</em> starting at location 0100h.  A transient program is normally run from the command line by the <em>Console Command Processor (CCP)</em> located above the TPA.  When a transient program finishes it generally returns control to the CCP.  This is often done by initiating a warm start by jumping to location 0000h.</p>
<p>After we have exited a program we can re-execute it by running the 'RERUN' command we created earlier.  This would cause the CCP to load it into the TPA and jump to its start at 0100h.  However, because the 'RERUN' command is empty it doesn't write over the existing program in the TPA and instead starts executing it from the start.  This won't always work though as often programs won't reinitialize their variables when a program starts or they may write over the CCP in which case reloading it would corrupt this part of the program.  Therefore, it takes a certain amount of trial and error to find which programs this will work for.</p>
<h2>Example</h2>
<p>Below we demonstrate this by entering a program into <a href="http://www.classiccmp.org/cpmarchives/cpm/Software/WalnutCD/simtel/cpmug/cpmug002.ark" title="CPMUG002.ARK - Contains Tiny Basic">TINY BASIC</a>, exiting from Basic (using <code>BYE</code>), running <code>RERUN</code> to re-execute Basic and then seeing that the Basic program is still intact in memory.  This would be very useful if we forget to save our entered Basic program as we could jump back into it and then save it.</p>
<pre><code>D&gt;TINYBAS

SHERRY BROTHERS TINY BASIC VER. 3.1

OK
&gt;10 FOR I=1 TO 5
&gt;20 PRINT &quot;HELLO WORLD!&quot;
&gt;30 NEXT I
&gt;BYE

D&gt;RERUN

OK
&gt;LIST
  10 FOR I=1 TO 5
  20 PRINT &quot;HELLO WORLD!&quot;
  30 NEXT I

OK
&gt;RUN
HELLO WORLD!
HELLO WORLD!
HELLO WORLD!
HELLO WORLD!
HELLO WORLD!

OK
&gt;
</code></pre>
<h2>CP/M Plus</h2>
<p>This procedure won't work on CP/M Plus as during a cold or warm start it overwrites the start of the TPA with the CCP and therefore if we were to run our 'RERUN' command it would just jump to the CCP and continue executing.</p>
<h2>Video</h2>
<p>The following video shows the re-execute command being used.</p>
<div class="youtube-wrapper">
<iframe width="560" height="315" src="https://www.youtube.com/embed/y3RzAmlTXsE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
      </div>
    </article>
</div>

  <div id="cclicence">
    <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
      <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
    </a>
    <br />
    <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Re-execute Programs in Memory on CP/M</span>
    by <a xmlns:cc="http://creativecommons.org/ns#" href="https://techtinkering.com/articles/re-execute-programs-on-cpm/" property="cc:attributionName" rel="cc:attributionURL">Lawrence Woodman</a>
   is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
   
  </div>


  <div class="discuss">
    <h2 style="margin-top:0;">Share This Post</h2>
    <div class="contact">
  <ul>
    <li><a href="http://www.reddit.com/submit?url=https%3A%2F%2Ftechtinkering.com%2Farticles%2Fre-execute-programs-on-cpm%2F&title=Re-execute%20Programs%20in%20Memory%20on%20CP%2FM" target="_blank" title="Submit to Reddit">Reddit</a></li>
    <li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftechtinkering.com%2Farticles%2Fre-execute-programs-on-cpm%2F&quote=Re-execute%20Programs%20in%20Memory%20on%20CP%2FM" target="_blank" title="Share on Facebook">Facebook</a></li>
    <li><a href="https://twitter.com/intent/tweet?source=https%3A%2F%2Ftechtinkering.com%2Farticles%2Fre-execute-programs-on-cpm%2F&text=Re-execute%20Programs%20in%20Memory%20on%20CP%2FM:%0Ahttps%3A%2F%2Ftechtinkering.com%2Farticles%2Fre-execute-programs-on-cpm%2F&via=TechTinkering" target="_blank" title="Tweet">Twitter</a></li>
    <li><a href="mailto:?subject=Re-execute%20Programs%20in%20Memory%20on%20CP%2FM&body=After%20a%20transient%20program%20terminates%20on%20CP%2FM%20it%27s%20often%20possible%20to%20re-execute%20it%20%20in%20memory%20without%20having%20to%20reload%20it%20from%20disk.%20%20This%20is%20a%20great%20little%20trick%20if%20using%20slow%20disks%20as%20it%27s%20much%20quicke...:%0A%0Ahttps%3A%2F%2Ftechtinkering.com%2Farticles%2Fre-execute-programs-on-cpm%2F" target="_blank" title="Send email">Email</a></li>
  </ul>
</div>

    <h2>Feedback/Discuss</h2>
    <div class="contact">
  <ul>
      <li><a href="https://twitter.com/TechTinkering/status/1348691147338641408" target="_blank" title="Discuss on Twitter">Twitter</a></li>


    <li><a href="mailto:techtinkeringuk@gmail.com?subject=Comment:%20Re-execute%20Programs%20in%20Memory%20on%20CP%2FM&body=Article%20URL:%20https%3A%2F%2Ftechtinkering.com%2Farticles%2Fre-execute-programs-on-cpm%2F%0A" title="Send us an email">Email</a></li>
  </ul>
</div>
  </div>


    <div>
    <h2>Related Articles</h2>
    <div class="margin-buffer">
      <header>
  <h2><a href="/articles/modula-2-compilers-on-cpm/">Modula-2 Compilers on CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/modula-2/">Modula-2</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  Modula-2 is a great language in general and is a good choice for programming on CP/M.  There are three good compilers available for CP/M which all require a Z80 processor and we'll compare each in turn...
  &nbsp;
  <a class="readMore" href="/articles/modula-2-compilers-on-cpm/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/xccp-a-shell-extension-for-cpm/">XCCP: A Shell Extension for CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  XCCP describes itself as an Extended Console Command Processor for CP/M. It supports the 8080 and v1.0 was released by Anton R. Fleig in 1984.  Like EPEX, XCCP doesn't require installing so we can begi...
  &nbsp;
  <a class="readMore" href="/articles/xccp-a-shell-extension-for-cpm/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/epex-an-environment-extension-for-cpm/">EPEX: An Environment Extension for CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  Epex is an evironment extension for CP/M.  It stands for Environmental Processing EXecutive, and v1.1 was released by James H. Whorton in 1986.  It can make using CP/M much more comfortable at the cost...
  &nbsp;
  <a class="readMore" href="/articles/epex-an-environment-extension-for-cpm/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/file-comparison-utilities-on-cpm/">File Comparison Utilities on CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  There are many utilities available for CP/M to compare the differences between files and to distribute those differences.  All the utilities in this article can be found on the Walnut Creek CD.
Binary ...
  &nbsp;
  <a class="readMore" href="/articles/file-comparison-utilities-on-cpm/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/breakout-style-games-on-cpm/">Breakout Style Games on CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/games/">Games</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  Breakout style video games were pretty popular at one time both at Arcades and on home computers.   The games are based on a simple concept where you have to destroy a group of 'bricks' at the top of t...
  &nbsp;
  <a class="readMore" href="/articles/breakout-style-games-on-cpm/">Read More</a>
</div>
<br />
</div>
    </div>

    </div>

    <footer>
  <nav>
    <div class="container">
      <div>
        <strong>Legal:</strong>
        <a href="/terms/">T & C</a>, <a href="/privacy/">Privacy Policy</a>
        &nbsp;
        <strong>Misc:</strong>
        <a href="https://github.com/lawrencewoodman/techtinkering.com" title="Fork TechTinkering On GitHub ">GitHub</a>
      </div>
    </div>
  </nav>
</footer>
  </body>
</html>