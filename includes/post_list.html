!* commandSubst true
<div class="margin-buffer">
! set numPosts 0
! foreach post [getparam posts] {
!   if {![dict exists $post redirectTo]} {
!     dict set post postNum $numPosts
!     incr numPosts
!     if {[getparam maxPosts] != 0 && $numPosts > [getparam maxPosts]} {
!       break
!     }
      [ornament -params $post -directory [dir includes] -file post_summary.html]
!   }
! }
</div>
