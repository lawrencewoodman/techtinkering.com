<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>CP/M Standard Console Control Characters</title>
  <meta name="description" content="CP/M helped provide a consistent console interface for the user by supporting a number of standard control characters through the BDOS console functions.  This w">
  <meta name="keywords" content="Retro Vintage Programming Tinkering"/>

  <!-- *** Twitter Card *** -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@techtinkering">
  <meta name="twitter:title" content="CP/M Standard Console Control Characters">
  <meta name="twitter:description" content="CP/M helped provide a consistent console interface for the user by supporting a number of standard control characters through the BDOS console functions.  This w">
    <meta name="twitter:image"
         content="https://techtinkering.com/img/social_images/cpm_line_editing.png">
  <!-- *** Twitter Card *** -->

  <!-- *** Open Graph *** --->
  <meta property="og:type" content="website">
  <meta property="og:title" content="CP/M Standard Console Control Characters">
  <meta property="og:description" content="CP/M helped provide a consistent console interface for the user by supporting a number of standard control characters through the BDOS console functions.  This w">
  <meta property="og:url" content="https://techtinkering.com/articles/cpm-standard-console-control-characters/">
    <meta property="og:image"
         content="https://techtinkering.com/img/social_images/cpm_line_editing.png">
  <!-- *** Open Graph *** --->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-4388762-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-4388762-2');
  </script>

  <script>
    console.log('timeZone: '+Intl.DateTimeFormat().resolvedOptions().timeZone);
    function isUserFromUK() {
      return Intl.DateTimeFormat().resolvedOptions().timeZone == "Europe/London";
    }
  </script>

  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/article.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" rel="stylesheet" type="text/css" />
  <link rel="canonical" href="https://techtinkering.com/articles/cpm-standard-console-control-characters/">
  <link rel="alternate" type="application/rss+xml" title="TechTinkering - Retro Computers, Programming, General Technical Tinkering"
        href="https://feedproxy.google.com/TechTinkering" />

	<!-- ****** faviconit.com favicons ****** -->
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<!-- ****** faviconit.com favicons ****** -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>

  <script>
    if (isUserFromUK()) {
      console.log("No Google ADs - UK user");
    } else {
      console.log("Google ADs - not from uk");
      document.write('<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"><' + '/script>');
    }
  </script>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <script>
    // Cookie Consent - https://cookieconsent.insites.com
    window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#252e39"
        },
        "button": {
          "background": "#14a7d0"
        }
      },
      "theme": "classic",
      "position": "top",
      "static": true,
      "content": {
        "message": "TechTinkering uses cookies for advertising, analytics, etc.",
        "href": "https://techtinkering.com/privacy/"
      }
    })});
  </script>

  <script>
    if (isUserFromUK()) {
    } else {
      console.log("Google Ads - non-uk user");
      (adsbygoogle = window.adsbygoogle || []).push({
           google_ad_client: "ca-pub-1613732348909658",
           enable_page_level_ads: true
      });
    }
  </script>

</head>
  <body>
    <nav>
  <div class="container">
    <div class="navbar-header">
      <a href="/">TechTinkering</a><br />
      =============
    </div>

    <div class="contact">
      <ul>
        <li>
          <a href="https://twitter.com/TechTinkering" title="@TechTinkering on Twitter">Twitter</a>
        </li>
        <li>
          <a href="https://youtube.com/techtinkering" title="TechTinkering's YouTube Channel">YouTube</a>
        </li>
        <li>
          <a href="https://feeds.feedburner.com/TechTinkering" title="Subscribe to our RSS Feed">RSS</a>
        </li>
        <li>
          <a href="mailto:techtinkering@vlifesystems.com" title="Email us, we'd love to hear from you">Email</a>
        </li>
        <li>
          <a href="/useful-links/" title="Useful vintage computer links">Useful Links</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div id="content" class="container">
      <div class="margin-buffer">
    <article itemscope itemtype="http://schema.org/BlogPosting">
    <meta itemprop="image"
         content="https://techtinkering.com/img/social_images/cpm_line_editing.png" />
      <header>
        <a href="/articles/cpm-standard-console-control-characters/" title="CP/M Standard Console Control Characters">
          <h1 itemprop="headline name">CP/M Standard Console Control Characters</h1>
        </a>
        <div>
            <time itemprop="datePublished"
                  datetime="2019-06-07">
               7 June 2019
            </time>
          <span itemscope itemprop="publisher"
                itemtype="http://schema.org/Organization">
            <meta itemprop="name" content="TechTinkering" />
            <meta itemprop="url" content="https://techtinkering.com" />
          </span>
          <span itemscope itemprop="author" itemtype="http://schema.org/Person">
            <a rel="author" itemprop="url" href="https://lawrencewoodman.github.io">
              <span itemprop="name">Lawrence Woodman</span>
            </a>
          </span>

          <ul class="tags">
              <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
              <li>#<a href="/articles/tag/retro/">Retro</a></li>
          </ul>
        </div>
      </header>

      <script>
        if (isUserFromUK()) {
          document.write(amznBanner);
        }
      </script>

        <div itemprop="articleBody">
        <p>CP/M helped provide a consistent console interface for the user by supporting a number of standard control characters through the BDOS console functions.  This was great for the user and made life much easier for the programmer as a lot of the work was already done for them.</p>
<h2>CP/M 2.2 Control Characters</h2>
<table class="neatTable neatBorder">
  <tr><th>Character</th><th>Meaning</th></tr>
  </tr>
    <td>CTRL-C</td>
    <td>Restart (warm boot) system.  This is used to exit a running program and to reset the disk system.  On CP/M 2.2 you use this at the system prompt after changing a diskette to allow you write to it without corrupting the disk.</td>
  </tr>
  </tr>
    <td>CTRL-E</td>
    <td>Move cursor to beginning of next line without sending line to be processed.  This is useful for typing long lines that are longer than the terminal's line length.</td>
  </tr>
  <tr>
    <td>CTRL-H,<br />RUBOUT,<br />DELETE</td>
    <td>Delete character to the left of cursor.  On some terminals this will repeat the character deleted on others it will move the cursor one character to the left.</td>
  <tr>
    <td>CTRL-I,<br />TAB</td>
    <td>Move cursor to next tap stop which is automatically set at each  column.</td>
  </tr>
  <tr>
    <td>CTRL-J,<br />CTRL-M,<br />RETURN</td>
    <td>Send the line to be processed and move the cursor to the beginning of a new line below.</td>
  </tr>
  </tr>
    <td>CTRL-P</td>
    <td>Start echoing everything sent to the console to the printer.  A second CTRL-P stops printer echo.</td>
  </tr>
  <tr>
    <td>CTRL-R</td>
    <td>Re-type current line.  It will place a '#' at the end of the current line and then redisplay the current line below.  This is useful if you have been deleting characters in a line or the line has got corrupted for some reason.</td>
  </tr>
  <tr>
    <td>CTRL-S</td>
    <td>Stop terminal from scrolling.  This is useful if text is scrolling too fast on the terminal to read it.  If the scrolling is paused you can terminate the program with CTRL-C.  A second CTRL-S allows terminal to start scrolling again.</td>
  </tr>
  <tr>
    <td>CTRL-U</td>
    <td>Discard line and allows you to start again on the line below.  It will place a '#' at the end of the discarded line and then move to the beginning of the next line to allow you to enter replacement text.</td>
  </tr>
  <tr>
    <td>CTRL-X</td>
    <td>Erase line and move the cursor to the beginning of that line.</td>
  </tr>
</table>
<div class="youtube-wrapper">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/TVOnK6b5plo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
<h2>CP/M 3 Control Characters</h2>
<p>CP/M 3 added a number of control characters and changed others.</p>
<table class="neatTable neatBorder">
  <tr><th>Character</th><th>Meaning</th></tr>
  <tr>
    <td>CTRL-Q</td>
    <td>Restart terminal scrolling after being stopped with CTRL-S.</td>
  </tr>
  <tr>
    <td>CTRL-R</td>
    <td>Re-type current line.  It will place a '#' at the <em>current cursor position and display the current line left of the cursor on the line below.  This is useful if you have been editing a line</em> or the line has got corrupted for some reason.</td>
  </tr>
  <tr>
    <td>CTRL-S</td>
    <td>Stop terminal from scrolling.  This is useful if text is scrolling too fast on the terminal to read it.  If the scrolling is paused you can terminate the program with CTRL-C.  <em>CTRL-Q allows terminal to start scrolling again.</em></td>
  </tr>
  <tr>
    <td>CTRL-X</td>
    <td>Erase line <em>to the left of the cursor and move the cursor to the beginning of that line.  This keeps any characters to the right of the cursor.</em></td>
  </tr>
</table>
<h3>CP/M 3 Line Editing Control Characters</h3>
<p>One of the great additions in CP/M 3 is the line editing control characters that provide a standard way to edit a line.  This only worked on systems that were configured for banked memory, but by the time CP/M 3 came out most new machines were.</p>
<table class="neatTable neatBorder">
  <tr><th>Character</th><th>Meaning</th></tr>
  <tr>
    <td>CTRL-A</td>
    <td>Move the cursor one character to the left.</td>
  </tr>
  <tr>
    <td>CTRL-B</td>
    <td>Move the cursor to the beginning of the line.  If the cursor is beginning of the line then it moves the cursor to the end of the line.</td>
  </tr>
  <tr>
    <td>CTRL-F</td>
    <td>Move the cursor one character to the right.</td>
  </tr>
  <tr>
    <td>CTRL-G</td>
    <td>Delete the character at the cursor.  The rest of the line to the right of the cursor moves one character to the left.</td>
  </tr>
  <tr>
    <td>CTRL-I,<br />TAB</td>
    <td>Move cursor to next tap stop which is automatically set at each eighth column.  <em>If there is text to the right of the cursor it will be moved to the next tab stop.</em></td>
  </tr>
  <tr>
    <td>CTRL-K</td>
    <td>Delete from the cursor to the end of the line.</td>
  </tr>
  <tr>
    <td>CTRL-W</td>
    <td>Recall previous line discarded that was to the left of the cursor when CTRL-U was pressed.</td>
  </tr>
</table>
<div class="youtube-wrapper">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/cgyIpAkcFyA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
<h2>Test Programs</h2>
<p>To demonstrate that these control characters were handled by the built-in BDOS calls, two programs are supplied below.</p>
<h3>Testing Line Input Control Characters</h3>
<p>The following program repeatedly accepts a line of text and then when 'RETURN' or similar is pressed it will echo it back to the user.  It demonstrates how the built-in BDOS 10 (<code>RBUFF</code>) function, called from within <code>CIMSG</code>, handles the standard console input control characters for the programmer.</p>
<pre><code class="language-NASM">; ECHO LINES OF TEXT ENTERED
; BASED ON EXAMPLE FROM CP/M ASSEMBLY LANGUAGE PROGRAMMING BY KEN BARBIER
; 4 JUNE 2019

; ASCII CHARACTERS
CR      EQU     0DH             ; CARRIAGE RETURN
LF      EQU     0AH             ; LINE FEED

; CP/M BDOS FUNCTIONS
WCONF   EQU     2               ; WRITE (E) TO CON:
RBUFF   EQU     10              ; READ A CONSOLE LINE

; CP/M ADDRESSES
BDOS    EQU     5               ; SYSTEM CALL ENTRY
TPA     EQU     100H            ; TRANSIENT PROGRAM AREA

        ORG     TPA

START:  LXI     SP,STAK         ; SET UP USER'S STACK
START2: CALL    CIMSG           ; GET A LINE OF INPUT
        CALL    CCRLF
        LXI     H,INBUF+2       ; POINT TO ITS TEXT
        CALL    COMSG           ; ECHO THE WHOLE LINE
        CALL    CCRLF           ; AND CR, LF
        JMP     START2          ; THEN DO ANOTHER

; CHARACTER IN REGISTER A OUTPUT TO CONSOLE
CO:     PUSH    B               ; SAVE REGISTERS
        PUSH    D
        PUSH    H
        MVI     C,WCONF         ; SELECT FUNCTION
        MOV     E,A             ; CHARACTER TO E
        CALL    BDOS            ; OUTPUT BY CP/M
        POP     H               ; RESTORE REGISTERS
        POP     D
        POP     B
        RET

; CARRIAGE RETURN, LINE FEED TO CONSOLE
CCRLF:  MVI     A,CR
        CALL    CO
        MVI     A,LF
        JMP     CO

; MESSAGE POINTED TO BY HL OUT TO CONSOLE
COMSG:  MOV     A,M             ; GET A CHARACTER
        ORA     A               ; ZERO IS THE TERMINATOR
        RZ                      ; RETURN ON ZERO
        CALL    CO              ; ELSE OUTPUT THE CHARACTER
        INX     H               ; POINT TO THE NEXT ONE
        JMP     COMSG           ; AND CONTINUE

; INPUT CONSOLE MESSAGE INTO BUFFER
CIMSG:  PUSH    B               ; SAVE REGISTERS
        PUSH    D
        PUSH    H
        LXI     H,INBUF+1       ; ZERO CHARACTER COUNTER
        MVI     M,0
        DCX     H               ; SET MAXIMUM LINE LENGTH
        MVI     M,80
        XCHG                    ; INBUF POINTER TO DE REGISTERS
        MVI     C,RBUFF         ; SET UP READ BUFFER FUNCTION
        CALL    BDOS            ; INPUT A LINE
        LXI     H,INBUF+1       ; GET CHARACTER COUNTER
        MOV     E,M             ; INTO LSB OF DE REGISTER PAIR
        MVI     D,0             ; ZERO MSB
        DAD     D               ; ADD LENGTH TO START
        INX     H               ; PLUS ONE POINTS TO END
        MVI     M,0             ; INSERT TERMINATOR AT END
        POP     H               ; RESTORE ALL REGISTERS
        POP     D
        POP     B
        RET

INBUF:  DS      83              ; LINE INPUT BUFFER

; SET UP STACK SPACE
        DS      64              ; NUM LOCATIONS ON STACK
STAK    DB      0               ; TOP OF STACK

        END
</code></pre>
<h3>Testing Output Control Characters</h3>
<p>The program below will output alternating '0' or '1' characters which you can pause/unpause with 'CTRL-S' and 'CTRL-Q' as appropriate.  If paused you can exit the program with 'CTRL-C'.  The standard console output control characters are handled by the built-in BDOS 2 (<code>WCONF</code>) function which relieves the programmer of this task.</p>
<pre><code class="language-NASM">; OUTPUT ALTERNATE '0' OR '1' CHARACTERS
; BY LAWRENCE WOODMAN
; 4 JUNE 2019

; CP/M BDOS FUNCTIONS
WCONF   EQU     2               ; WRITE (E) TO CON:

; CP/M ADDRESSES
BDOS    EQU     5
TPA     EQU     100H

        ORG     TPA

START:  MVI     C,WCONF
        MVI     E,'0'
        CALL    BDOS
        MVI     C,WCONF
        MVI     E,'1'
        CALL    BDOS
        JMP     START

        END
</code></pre>
      </div>
    </article>
</div>

<script>
  if (isUserFromUK()) {
    document.write(amznBanner);
  }
</script>

  <div id="cclicence">
    <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
      <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
    </a>
    <br />
    <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">CP/M Standard Console Control Characters</span>
    by <a xmlns:cc="http://creativecommons.org/ns#" href="https://techtinkering.com/articles/cpm-standard-console-control-characters/" property="cc:attributionName" rel="cc:attributionURL">Lawrence Woodman</a>
   is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
   
  </div>


  <div class="discuss">
    <h2 style="margin-top:0;">Share This Post</h2>
    <div class="contact">
  <ul>
    <li><a href="http://www.reddit.com/submit?url=https%3A%2F%2Ftechtinkering.com%2Farticles%2Fcpm-standard-console-control-characters%2F&title=CP%2FM%20Standard%20Console%20Control%20Characters" target="_blank" title="Submit to Reddit">Reddit</a></li>
    <li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftechtinkering.com%2Farticles%2Fcpm-standard-console-control-characters%2F&quote=CP%2FM%20Standard%20Console%20Control%20Characters" target="_blank" title="Share on Facebook">Facebook</a></li>
    <li><a href="https://twitter.com/intent/tweet?source=https%3A%2F%2Ftechtinkering.com%2Farticles%2Fcpm-standard-console-control-characters%2F&text=CP%2FM%20Standard%20Console%20Control%20Characters:%0Ahttps%3A%2F%2Ftechtinkering.com%2Farticles%2Fcpm-standard-console-control-characters%2F&via=TechTinkering" target="_blank" title="Tweet">Twitter</a></li>
    <li><a href="mailto:?subject=CP%2FM%20Standard%20Console%20Control%20Characters&body=CP%2FM%20helped%20provide%20a%20consistent%20console%20interface%20for%20the%20user%20by%20supporting%20a%20number%20of%20standard%20control%20characters%20through%20the%20BDOS%20console%20functions.%20%20This%20was%20great%20for%20the%20user%20and%20made%20life%20much...:%0A%0Ahttps%3A%2F%2Ftechtinkering.com%2Farticles%2Fcpm-standard-console-control-characters%2F" target="_blank" title="Send email">Email</a></li>
  </ul>
</div>

    <h2>Feedback/Discuss</h2>
    <div class="contact">
  <ul>


    <li><a href="mailto:techtinkering@vlifesystems.com?subject=Comment:%20CP%2FM%20Standard%20Console%20Control%20Characters&body=Article%20URL:%20https%3A%2F%2Ftechtinkering.com%2Farticles%2Fcpm-standard-console-control-characters%2F%0A" title="Send us an email">Email</a></li>
  </ul>
</div>
  </div>


    <div>
    <h2>Related Articles</h2>
    <div class="margin-buffer">
      <header>
  <h2><a href="/articles/modula-2-compilers-on-cpm/">Modula-2 Compilers on CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/modula-2/">Modula-2</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  Modula-2 is a great language in general and is a good choice for programming on CP/M.  There are three good compilers available for CP/M which all require a Z80 processor and we'll compare each in turn...
  &nbsp;
  <a class="readMore" href="/articles/modula-2-compilers-on-cpm/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/xccp-a-shell-extension-for-cpm/">XCCP: A Shell Extension for CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  XCCP describes itself as an Extended Console Command Processor for CP/M. It supports the 8080 and v1.0 was released by Anton R. Fleig in 1984.  Like EPEX, XCCP doesn't require installing so we can begi...
  &nbsp;
  <a class="readMore" href="/articles/xccp-a-shell-extension-for-cpm/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/epex-an-environment-extension-for-cpm/">EPEX: An Environment Extension for CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  Epex is an evironment extension for CP/M.  It stands for Environmental Processing EXecutive, and v1.1 was released by James H. Whorton in 1986.  It can make using CP/M much more comfortable at the cost...
  &nbsp;
  <a class="readMore" href="/articles/epex-an-environment-extension-for-cpm/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/file-comparison-utilities-on-cpm/">File Comparison Utilities on CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  There are many utilities available for CP/M to compare the differences between files and to distribute those differences.  All the utilities in this article can be found on the Walnut Creek CD.
Binary ...
  &nbsp;
  <a class="readMore" href="/articles/file-comparison-utilities-on-cpm/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/breakout-style-games-on-cpm/">Breakout Style Games on CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/games/">Games</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  Breakout style video games were pretty popular at one time both at Arcades and on home computers.   The games are based on a simple concept where you have to destroy a group of 'bricks' at the top of t...
  &nbsp;
  <a class="readMore" href="/articles/breakout-style-games-on-cpm/">Read More</a>
</div>
<br />
</div>
    </div>

<script>
  if (isUserFromUK()) {
    document.write(amznBanner);
  }
</script>
    </div>

    <footer>
  <nav>
    <div class="container">
      <div>
        <strong>Legal:</strong>
        <a href="/terms/">T & C</a>, <a href="/privacy/">Privacy Policy</a>
        &nbsp;
        <strong>Misc:</strong>
        <a href="https://github.com/lawrencewoodman/techtinkering.com" title="Fork TechTinkering On GitHub ">GitHub</a>
      </div>
    </div>
  </nav>
</footer>
  </body>
</html>