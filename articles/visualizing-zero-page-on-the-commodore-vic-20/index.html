<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Visualizing Zero Page on the Commodore VIC-20</title>
  <meta name="description" content="The VIC-20 is a very flexible little machine and allows us to choose which area of memory represents the screen map.   One interesting thing we can do is use thi">
  <meta name="keywords" content="Retro Vintage Programming Tinkering"/>

  <!-- *** Twitter Card *** -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@techtinkering">
  <meta name="twitter:title" content="Visualizing Zero Page on the Commodore VIC-20">
  <meta name="twitter:description" content="The VIC-20 is a very flexible little machine and allows us to choose which area of memory represents the screen map.   One interesting thing we can do is use thi">
    <meta name="twitter:image"
         content="https://techtinkering.com/img/social_images/vic20_visualize_zero_page.png">
  <!-- *** Twitter Card *** -->

  <!-- *** Open Graph *** --->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Visualizing Zero Page on the Commodore VIC-20">
  <meta property="og:description" content="The VIC-20 is a very flexible little machine and allows us to choose which area of memory represents the screen map.   One interesting thing we can do is use thi">
  <meta property="og:url" content="https://techtinkering.com/articles/visualizing-zero-page-on-the-commodore-vic-20/">
    <meta property="og:image"
         content="https://techtinkering.com/img/social_images/vic20_visualize_zero_page.png">
  <!-- *** Open Graph *** --->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-4388762-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-4388762-2');
  </script>

  <script>
    function isUserFromUK() {
      console.log('timeZone: '+Intl.DateTimeFormat().resolvedOptions().timeZone);
      return Intl.DateTimeFormat().resolvedOptions().timeZone == "Europe/London";
    }
  </script>

  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/article.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" rel="stylesheet" type="text/css" />
  <link rel="canonical" href="https://techtinkering.com/articles/visualizing-zero-page-on-the-commodore-vic-20/">
  <link rel="alternate" type="application/rss+xml" title="TechTinkering - Retro Computers, Programming, General Technical Tinkering"
        href="https://feedproxy.google.com/TechTinkering" />

	<!-- ****** faviconit.com favicons ****** -->
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<!-- ****** faviconit.com favicons ****** -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>

  <script>
    if (isUserFromUK()) {
      console.log("No Google ADs - UK user");
    } else {
      console.log("Google ADs - not from uk");
      document.write('<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"><' + '/script>');
    }
  </script>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <script>
    // Cookie Consent - https://cookieconsent.insites.com
    window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#252e39"
        },
        "button": {
          "background": "#14a7d0"
        }
      },
      "theme": "classic",
      "position": "top",
      "static": true,
      "content": {
        "message": "TechTinkering uses cookies for advertising, analytics, etc.",
        "href": "https://techtinkering.com/privacy/"
      }
    })});
  </script>

  <script>
    if (isUserFromUK()) {
      console.log("No Google Ads - uk user");
    } else {
      console.log("Google Ads - non-uk user");
      (adsbygoogle = window.adsbygoogle || []).push({
           google_ad_client: "ca-pub-1613732348909658",
           enable_page_level_ads: true
      });
    }
  </script>

  <script>
    if (isUserFromUK()) {
      console.log("Amazon Banner - from uk");
      // Amazon Prime Video Banner 728x90 and 300x250
      amznBanner='<div class="amazonBannerDesktop"><iframe src="https://rcm-eu.amazon-adsystem.com/e/cm?o=2&p=48&l=ur1&category=piv&banner=0E183RXMV88X6J8GJ002&f=ifr&linkID=a2c37aae0561f075af3356504493bdf0&t=techtinkering-21&tracking_id=techtinkering-21" width="728" height="90" scrolling="no" border="0" marginwidth="0" style="border:none;" frameborder="0" sandbox="allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation"><' + '/iframe><' +'/div><div class="amazonBannerMobile"><iframe src="https://rcm-eu.amazon-adsystem.com/e/cm?o=2&p=12&l=ur1&category=piv&banner=070GKT77WVHAHSRTHK02&f=ifr&linkID=0dc57b53bcc8f7ab67a385d51155e57a&t=techtinkering-21&tracking_id=techtinkering-21" width="300" height="250" scrolling="no" border="0" marginwidth="0" style="border:none;" frameborder="0" sandbox="allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation"><' + '/iframe><' + '/div>';
    }
  </script>
</head>
  <body>
    <nav>
  <div class="container">
    <div class="navbar-header">
      <a href="/">TechTinkering</a><br />
      =============
    </div>

    <div class="contact">
      <ul>
        <li>
          <a href="https://twitter.com/TechTinkering" title="@TechTinkering on Twitter">Twitter</a>
        </li>
        <li>
          <a href="https://youtube.com/techtinkering" title="TechTinkering's YouTube Channel">YouTube</a>
        </li>
        <li>
          <a href="https://feeds.feedburner.com/TechTinkering" title="Subscribe to our RSS Feed">RSS</a>
        </li>
        <li>
          <a href="mailto:techtinkering@vlifesystems.com" title="Email us, we'd love to hear from you">Email</a>
        </li>
        <li>
          <a href="/useful-links/" title="Useful vintage computer links">Useful Links</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div id="content" class="container">
      <div class="margin-buffer">
    <article itemscope itemtype="http://schema.org/BlogPosting">
    <meta itemprop="image"
         content="https://techtinkering.com/img/social_images/vic20_visualize_zero_page.png" />
      <header>
        <a href="/articles/visualizing-zero-page-on-the-commodore-vic-20/" title="Visualizing Zero Page on the Commodore VIC-20">
          <h1 itemprop="headline name">Visualizing Zero Page on the Commodore VIC-20</h1>
        </a>
        <div>
            <time itemprop="datePublished"
                  datetime="2020-12-21">
              21 December 2020
            </time>
          <span itemscope itemprop="publisher"
                itemtype="http://schema.org/Organization">
            <meta itemprop="name" content="TechTinkering" />
            <meta itemprop="url" content="https://techtinkering.com" />
          </span>
          <span itemscope itemprop="author" itemtype="http://schema.org/Person">
            <a rel="author" itemprop="url" href="https://lawrencewoodman.github.io">
              <span itemprop="name">Lawrence Woodman</span>
            </a>
          </span>

          <ul class="tags">
              <li>#<a href="/articles/tag/commodore/">Commodore</a></li>
              <li>#<a href="/articles/tag/programming/">Programming</a></li>
              <li>#<a href="/articles/tag/retro/">Retro</a></li>
              <li>#<a href="/articles/tag/vic-20/">VIC-20</a></li>
          </ul>
        </div>
      </header>
        <div itemprop="articleBody">
        <p>The VIC-20 is a very flexible little machine and allows us to choose which area of memory represents the screen map.   One interesting thing we can do is use this to visualize a section of memory such as the zero page.  This can create quite interesting patterns on the screen and allows us to actually see some of the processing of the Vic in action.</p>
<h2>Moving the Screen Map</h2>
<img src="/img/articles/vic20_screen_map_address_diagram.png" class="img-right" style="width: 500px; clear: right;" title="How Screen Map is Calculated">
<p>The VIC chip uses a 14-bit screen map address and uses bits in locations $9002 (36866) and $9005 (36869) to set it.  Because of the peculiar way the VIC chip works when we alter location $9005, bit 7 must be set even though it will be changed to 0 in the final address for the screen map.  Bit 7 of location $9002 also determines the location of the colour map.  The remaining bits of $9005 set the character map address and they default to 0 on an unexpanded Vic.  The remaining bits of $9002 set the number of columns displayed and they default to 22.</p>
<div class="overflow-auto"><table class="neatTable neatBorder">
  <tr><th class="centre">Screen Map</th><th class="centre">Colour Map</th><th class="centre">$9005 Bits 7-4</th><th class="centre">$9002 Bit 7</th><th class="centre">Notes</th></tr>
  <tr><td class="centre">$0000</td><td class="centre">$9400</td><td class="centre">1000<br />(128)</td><td class="centre">0</td><td>Display pages 0 and 1</td></tr>
  <tr><td class="centre">$1000</td><td class="centre">$9400</td><td class="centre">1100<br />(192)</td><td class="centre">0</td><td>Default screen map with 8Kb+ RAM expansion</tr>
  <tr><td class="centre">$1E00</td><td class="centre">$9600</td><td class="centre">1111<br />(240)</td><td class="centre">1<br />(128)</td><td>Default screen map for unexpanded Vics or those with 3Kb RAM expansion</td></tr>
</table>
<p>Compute credits Jim Butterfield with demonstrating how you can set the screen map to start at location 0 which allows you to observe the first two pages of memory.  Well nearly, because the screen can only display 506 bytes so the end of the second page can't be seen on the screen.</p>
<h2>Page 0 - Zero Page</h2>
<p>The <em>zero page</em> is important because it allows machine code programs to use shorter and faster instructions.  BASIC and the Kernal make heavy use of the locations in this page for frequently used data storage and therefore it is an interesting section of memory to look at.</p>
<p>On an unexpanded Vic we don't need to worry about what is already in locations 36869 and 36866 and therefore we can easily set the colour map to black text on a white background to make all the locations visible and then set the screen map to location 0 using:</p>
<pre><code>FOR I=37888 TO 37888+505:POKE I,0:NEXT I
POKE 36869,128:POKE 36866,22
</code></pre>
<p>While the screen is showing the zero page we could enter and run code to see what happens in zero page.  An easy demonstration would be to enter a <code>FOR</code> loop:</p>
<pre><code>FOR I=1 TO 1000:PRINT&quot;HELLO&quot;:NEXT I
</code></pre>
<h2>Page 1 - The Stack</h2>
<p>The 6502 reserves 256 bytes for the stack beginning at location $100 (256).  However, Basic uses locations $140-$1FF (320-511) as a stack and the preceding locations for a tape error log and for converting floating point numbers to ASCII.</p>
<p>We could demonstrate the BASIC stack being filled by repeatedly calling a nested <code>GOSUB</code> routine:</p>
<pre><code>10 GOSUB 10
</code></pre>
<h2>Interesting Locations</h2>
<p>There are a number of interesting locations and patterns that we can see.  There are lots of '@' symbols which would be $00 in memory.  There are two locations that we can see counting.  There is also a location that oscillates between '@' and 'A' which would be between $00 and $01 in memory.</p>
<p><video autoplay loop muted playsinline src="/video/articles/vic20_visualize_zero_page_annotated.mp4" class="video-centre" style="width: 100%; max-width: 600px; clear: right;" title="Screen Map Mapped to Zero Page"></video></p>
<div class="overflow-auto"><table class="neatTable neatBorder">
  <tr><th>Location</th><th>Row</th><th>Column</th><th>Purpose</th></tr>
  <tr><td class="centre">$A0-$A2<br />(160-162)</td><td class="centre">8</td><td class="centre">7</td><td>Jiffy Clock counting one-sixtieths of a second</td></tr>
  <tr><td class="centre">$C5 (197)</td><td class="centre">9</td><td class="centre">22</td><td>Matrix coordinate of last key pressed,  64 if none pressed</td></tr>
  <tr><td class="centre">$CB (203)</td><td class="centre">10</td><td class="centre">6</td><td>Matrix coordinate of current key pressed,  64 if none pressed</td></tr>
  <tr><td class="centre">$CD (205)</td><td class="centre">10</td><td class="centre">8</td><td>Cursor countdown before blink.  Normally counts 20 jiffies before blink of cursor.</td></tr>
  <tr><td class="centre">$CF (207)</td><td class="centre">10</td><td class="centre">10</td><td>Cursor blink status 1 = reversed character, 0 = non-reversed.  We can see alternating between '@' which is 0 and 'A' which is 1.</td><tr>
  <tr><td class="centre">$D3 (211)</td><td class="centre">10</td><td class="centre">14</td><td>Cursor position within the logical screen line.  Keep pressing a key to see increment from '@' which is 0 and then press return to see it revert to '@'.</td></tr>
  <tr><td class="centre">$D7 (215)</td><td class="centre">10</td><td class="centre">18</td><td>ASCII value of last key pressed.  Change to lowercase to see key pressed.</td></tr>
  <tr><td class="centre">$100-$1FF<br />(256-511)</td><td class="centre">12</td><td class="centre">15</td><td>The 6502 stack</td></tr>
  <tr><td class="centre">$140-$1FF<br />(320-511)</td><td class="centre">15</td><td class="centre">13</td><td>The BASIC stack</td></tr>
</table></div>
<h2>Video</h2>
<p>The following video shows zero page being visualized and exercised to create interesting patterns.</p>
<div class="youtube-wrapper">
<iframe width="560" height="315" src="https://www.youtube.com/embed/Fzd40ar8x8A" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
      </div>
    </article>
</div>

<script>
  if (isUserFromUK()) {
    document.write(amznBanner);
  }
</script>

  <div id="cclicence">
    <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
      <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
    </a>
    <br />
    <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Visualizing Zero Page on the Commodore VIC-20</span>
    by <a xmlns:cc="http://creativecommons.org/ns#" href="https://techtinkering.com/articles/visualizing-zero-page-on-the-commodore-vic-20/" property="cc:attributionName" rel="cc:attributionURL">Lawrence Woodman</a>
   is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
   
  </div>


  <div class="discuss">
    <h2 style="margin-top:0;">Share This Post</h2>
    <div class="contact">
  <ul>
    <li><a href="http://www.reddit.com/submit?url=https%3A%2F%2Ftechtinkering.com%2Farticles%2Fvisualizing-zero-page-on-the-commodore-vic-20%2F&title=Visualizing%20Zero%20Page%20on%20the%20Commodore%20VIC-20" target="_blank" title="Submit to Reddit">Reddit</a></li>
    <li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftechtinkering.com%2Farticles%2Fvisualizing-zero-page-on-the-commodore-vic-20%2F&quote=Visualizing%20Zero%20Page%20on%20the%20Commodore%20VIC-20" target="_blank" title="Share on Facebook">Facebook</a></li>
    <li><a href="https://twitter.com/intent/tweet?source=https%3A%2F%2Ftechtinkering.com%2Farticles%2Fvisualizing-zero-page-on-the-commodore-vic-20%2F&text=Visualizing%20Zero%20Page%20on%20the%20Commodore%20VIC-20:%0Ahttps%3A%2F%2Ftechtinkering.com%2Farticles%2Fvisualizing-zero-page-on-the-commodore-vic-20%2F&via=TechTinkering" target="_blank" title="Tweet">Twitter</a></li>
    <li><a href="mailto:?subject=Visualizing%20Zero%20Page%20on%20the%20Commodore%20VIC-20&body=The%20VIC-20%20is%20a%20very%20flexible%20little%20machine%20and%20allows%20us%20to%20choose%20which%20area%20of%20memory%20represents%20the%20screen%20map.%20%20%20One%20interesting%20thing%20we%20can%20do%20is%20use%20this%20to%20visualize%20a%20section%20of%20memory%20such%20...:%0A%0Ahttps%3A%2F%2Ftechtinkering.com%2Farticles%2Fvisualizing-zero-page-on-the-commodore-vic-20%2F" target="_blank" title="Send email">Email</a></li>
  </ul>
</div>

    <h2>Feedback/Discuss</h2>
    <div class="contact">
  <ul>
      <li><a href="https://twitter.com/TechTinkering/status/1341096100330127361" target="_blank" title="Discuss on Twitter">Twitter</a></li>


    <li><a href="mailto:techtinkering@vlifesystems.com?subject=Comment:%20Visualizing%20Zero%20Page%20on%20the%20Commodore%20VIC-20&body=Article%20URL:%20https%3A%2F%2Ftechtinkering.com%2Farticles%2Fvisualizing-zero-page-on-the-commodore-vic-20%2F%0A" title="Send us an email">Email</a></li>
  </ul>
</div>
  </div>


    <div>
    <h2>Related Articles</h2>
    <div class="margin-buffer">
      <header>
  <h2><a href="/articles/80-columns-in-software-on-the-commodore-vic-20/">80 Columns in Software on the Commodore VIC-20</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/commodore/">Commodore</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
          <li>#<a href="/articles/tag/vic-20/">VIC-20</a></li>
      </ul>
  </span>
</header>
<div>
  If you have good eyesight, a well-tuned display and patience it is possible to use 80 columns in software on the VIC-20.  This is really just an experiment but considering the limitations of the Vic I ...
  &nbsp;
  <a class="readMore" href="/articles/80-columns-in-software-on-the-commodore-vic-20/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/64-columns-sideways-on-the-commodore-vic-20/">64 Column Text Mode on the Commodore VIC-20</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/commodore/">Commodore</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
          <li>#<a href="/articles/tag/vic-20/">VIC-20</a></li>
      </ul>
  </span>
</header>
<div>
  With a little lateral thinking and by putting the television on its side we can create a 64 column sideways text mode on the VIC-20.  This article will demonstrate this and show how it is done.  Previo...
  &nbsp;
  <a class="readMore" href="/articles/64-columns-sideways-on-the-commodore-vic-20/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/getting-the-address-of-basic-variables-on-the-vic-20/">Getting the Address of BASIC Variables on the VIC-20</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/assembly/">Assembly</a></li>
          <li>#<a href="/articles/tag/basic/">BASIC</a></li>
          <li>#<a href="/articles/tag/commodore/">Commodore</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
          <li>#<a href="/articles/tag/vic-20/">VIC-20</a></li>
      </ul>
  </span>
</header>
<div>
  Getting the address of a BASIC variable can be useful if you want to pass data to a machine code routine or want to access the bytes of a variable directly to improve speed and reduce garbage collectio...
  &nbsp;
  <a class="readMore" href="/articles/getting-the-address-of-basic-variables-on-the-vic-20/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/saving-and-loading-memory-on-the-vic-20/">Saving and Loading Memory on the VIC-20</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/assembly/">Assembly</a></li>
          <li>#<a href="/articles/tag/basic/">BASIC</a></li>
          <li>#<a href="/articles/tag/commodore/">Commodore</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
          <li>#<a href="/articles/tag/vic-20/">VIC-20</a></li>
      </ul>
  </span>
</header>
<div>
  Saving and loading memory is quite easy on the VIC-20 once you know how.  However, it isn't obvious how to do this and therefore this article will present a few simple ways of doing it from BASIC and A...
  &nbsp;
  <a class="readMore" href="/articles/saving-and-loading-memory-on-the-vic-20/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/basic-line-storage-on-the-vic-20/">Basic Line Storage on the VIC-20</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/basic/">BASIC</a></li>
          <li>#<a href="/articles/tag/commodore/">Commodore</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
          <li>#<a href="/articles/tag/vic-20/">VIC-20</a></li>
      </ul>
  </span>
</header>
<div>
  BASIC programs are stored in memory using a simple structure that we can investigate and manipulate.  This article will show how they are stored and contains a BASIC program to go through each line of ...
  &nbsp;
  <a class="readMore" href="/articles/basic-line-storage-on-the-vic-20/">Read More</a>
</div>
<br />
</div>
    </div>

<script>
  if (isUserFromUK()) {
    document.write(amznBanner);
  }
</script>
    </div>

    <footer>
  <nav>
    <div class="container">
      <div>
        <script>
          if (isUserFromUK()) {
            document.write('<strong>Disclosure:<' +'/strong> As an Amazon Associate TechTinkering earns from qualifying purchases.<br />');
          }
        </script>
        <strong>Legal:</strong>
        <a href="/terms/">T & C</a>, <a href="/privacy/">Privacy Policy</a>
        &nbsp;
        <strong>Misc:</strong>
        <a href="https://github.com/lawrencewoodman/techtinkering.com" title="Fork TechTinkering On GitHub ">GitHub</a>
      </div>
    </div>
  </nav>
</footer>
  </body>
</html>