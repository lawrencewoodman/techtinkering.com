<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>If Only Borland Had Stuck With Turbo Modula-2 For CP/M</title>
  <meta name="description" content="I have written previously about why Turbo Pascal is a Great Choice For Programming Under CP/M and now it is time to talk about what could have been.  You probabl">
  <meta name="keywords" content="Retro Vintage Programming Tinkering"/>

  <!-- *** Twitter Card *** -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@techtinkering">
  <meta name="twitter:title" content="If Only Borland Had Stuck With Turbo Modula-2 For CP/M">
  <meta name="twitter:description" content="I have written previously about why Turbo Pascal is a Great Choice For Programming Under CP/M and now it is time to talk about what could have been.  You probabl">
  <!-- *** Twitter Card *** -->

  <!-- *** Open Graph *** --->
  <meta property="og:type" content="website">
  <meta property="og:title" content="If Only Borland Had Stuck With Turbo Modula-2 For CP/M">
  <meta property="og:description" content="I have written previously about why Turbo Pascal is a Great Choice For Programming Under CP/M and now it is time to talk about what could have been.  You probabl">
  <meta property="og:url" content="https://techtinkering.com/2013/03/12/if-only-borland-had-stuck-with-turbo-modula-2-for-cpm/">
  <!-- *** Open Graph *** --->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-4388762-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-4388762-2');
  </script>

  <script>
    console.log('timeZone: '+Intl.DateTimeFormat().resolvedOptions().timeZone);
    function isUserFromUK() {
      return Intl.DateTimeFormat().resolvedOptions().timeZone == "Europe/London";
    }
  </script>

  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/article.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" rel="stylesheet" type="text/css" />
  <link rel="canonical" href="https://techtinkering.com/2013/03/12/if-only-borland-had-stuck-with-turbo-modula-2-for-cpm/">
  <link rel="alternate" type="application/rss+xml" title="TechTinkering - Retro Computers, Programming, General Technical Tinkering"
        href="https://feedproxy.google.com/TechTinkering" />

	<!-- ****** faviconit.com favicons ****** -->
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<!-- ****** faviconit.com favicons ****** -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>

  <script>
    if (isUserFromUK()) {
      console.log("No Google ADs - UK user");
    } else {
      console.log("Google ADs - not from uk");
      document.write('<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"><' + '/script>');
    }
  </script>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <script>
    // Cookie Consent - https://cookieconsent.insites.com
    window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#252e39"
        },
        "button": {
          "background": "#14a7d0"
        }
      },
      "theme": "classic",
      "position": "top",
      "static": true,
      "content": {
        "message": "TechTinkering uses cookies for advertising, analytics, etc.",
        "href": "https://techtinkering.com/privacy/"
      }
    })});
  </script>

  <script>
    if (isUserFromUK()) {
      console.log("No Google Ads - uk user");
    } else {
      console.log("Google Ads - non-uk user");
      (adsbygoogle = window.adsbygoogle || []).push({
           google_ad_client: "ca-pub-1613732348909658",
           enable_page_level_ads: true
      });
    }
  </script>

  <script>
    if (isUserFromUK()) {
      console.log("Amazon Banner - from uk");
      // Amazon Prime Video Banner 728x90 and 300x250
      amznBanner='<div class="amazonBannerDesktop"><iframe src="https://rcm-eu.amazon-adsystem.com/e/cm?o=2&p=48&l=ur1&category=piv&banner=0E183RXMV88X6J8GJ002&f=ifr&linkID=a2c37aae0561f075af3356504493bdf0&t=techtinkering-21&tracking_id=techtinkering-21" width="728" height="90" scrolling="no" border="0" marginwidth="0" style="border:none;" frameborder="0" sandbox="allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation"><' + '/iframe><' +'/div><div class="amazonBannerMobile"><iframe src="https://rcm-eu.amazon-adsystem.com/e/cm?o=2&p=12&l=ur1&category=piv&banner=070GKT77WVHAHSRTHK02&f=ifr&linkID=0dc57b53bcc8f7ab67a385d51155e57a&t=techtinkering-21&tracking_id=techtinkering-21" width="300" height="250" scrolling="no" border="0" marginwidth="0" style="border:none;" frameborder="0" sandbox="allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation"><' + '/iframe><' + '/div>';
    }
  </script>
</head>
  <body>
    <nav>
  <div class="container">
    <div class="navbar-header">
      <a href="/">TechTinkering</a><br />
      =============
    </div>

    <div class="contact">
      <ul>
        <li>
          <a href="https://twitter.com/TechTinkering" title="@TechTinkering on Twitter">Twitter</a>
        </li>
        <li>
          <a href="https://youtube.com/techtinkering" title="TechTinkering's YouTube Channel">YouTube</a>
        </li>
        <li>
          <a href="https://feeds.feedburner.com/TechTinkering" title="Subscribe to our RSS Feed">RSS</a>
        </li>
        <li>
          <a href="mailto:techtinkering@vlifesystems.com" title="Email us, we'd love to hear from you">Email</a>
        </li>
        <li>
          <a href="/useful-links/" title="Useful vintage computer links">Useful Links</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div id="content" class="container">
      <div class="margin-buffer">
    <article itemscope itemtype="http://schema.org/BlogPosting">
      <header>
        <a href="/2013/03/12/if-only-borland-had-stuck-with-turbo-modula-2-for-cpm/" title="If Only Borland Had Stuck With Turbo Modula-2 For CP/M">
          <h1 itemprop="headline name">If Only Borland Had Stuck With Turbo Modula-2 For CP/M</h1>
        </a>
        <div>
            <time itemprop="datePublished"
                  datetime="2013-03-12">
              12 March 2013
            </time>
          <span itemscope itemprop="publisher"
                itemtype="http://schema.org/Organization">
            <meta itemprop="name" content="TechTinkering" />
            <meta itemprop="url" content="https://techtinkering.com" />
          </span>
          <span itemscope itemprop="author" itemtype="http://schema.org/Person">
            <a rel="author" itemprop="url" href="https://lawrencewoodman.github.io">
              <span itemprop="name">Lawrence Woodman</span>
            </a>
          </span>

          <ul class="tags">
              <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
              <li>#<a href="/articles/tag/programming/">Programming</a></li>
              <li>#<a href="/articles/tag/retro/">Retro</a></li>
          </ul>
        </div>
      </header>

      <script>
        if (isUserFromUK()) {
          document.write(amznBanner);
        }
      </script>

        <div itemprop="articleBody">
        <p>I have written previously about why <a href="/2013/03/05/turbo-pascal-a-great-choice-for-programming-under-cpm">Turbo Pascal is a Great Choice For Programming Under CP/M</a> and now it is time to talk about what could have been.  You probably haven't heard of Turbo Modula-2 for CP/M as it was only on the market for a brief period of time.  However, it was a superb product and, in many ways, feels like a grown-up version of Turbo Pascal.  Why TM-2 made such a fleeting appearance is shrouded in mystery.  It was released in 1986 by Echelon under license from Borland and then quickly withdrawn.  There doesn't seem to be any publicly documented reason for the withdrawal and it is said that Borland even denied its existence for a time.  I want to show why it was a real shame this happened, and how much better a programmer's life could have been.</p>
<h2>Integrated Development Environment</h2>
<p>Like Turbo Pascal, Turbo Modula-2 was an Integrated Development Environment including a compiler and Wordstar based editor.  On top of this TM-2 added a separate linker and library manager.  The most obvious initial difference is the size of an installation: TM-2 takes up 142Kb, compared to TP's tiny 34Kb.  However for this you get a lot more facilities, a bigger library and an altogether more sophisticated system.</p>
<h2>Language Enhancements</h2>
<p>The language itself is similar to TP and it is pretty easy to convert TP code to TM-2.  With TM-2 you get many of the things that are liked about TP, including overlays, easy access to machine-code functions and a good standard library.  In addition the library has been extended and you gain more numeric data types, coroutines, exceptions, procedures as parameters, typeless parameters, etc.  To have these facilities on a CP/M machine in 1986 would have been incredible.</p>
<h3>Modules</h3>
<p>The <em>Modula</em> in Turbo Modula-2, of course indicates the use of modules to separate code.  These are similar to <em>Units</em> in later versions of Turbo Pascal.  They allow you you to hide data and functions within a namespace and only expose what you want to.  Because of this isolation it allows the linker to only link-in functions that are used and hence reduces the executable size.  In addition, because the modules are separate they can be compiled separately.  Therefore when you make a change to your codebase, you only need to recompile the modules that have actually changed, which on a big project can greatly increase build speeds.</p>
<h2>Native vs M-Code</h2>
<p>Each module can be compiled to either native Z80 code or to M-code to be run on the built-in virtual machine.  This allows you to compile code that doesn't need to run quickly to M-code, which executes more slowly, but compiles much quicker and the manual says it generally takes about 1/3 the size of native code.  Then, for code that must run quickly you can set the IDE to compile to native Z80 code which runs much faster, but takes up more disk space and compiles more slowly.  Because of the separate linker you can freely mix modules compiled with either native or M-code and hence get the best of both worlds.</p>
<h2>Size and Speed Compared</h2>
<p>To compare the performance of TP and TM-2, I am using a program based on the Prime Sieve benchmark included with TM-2.</p>
<p>The code for the Prime Sieve in Turbo Pascal:</p>
<pre><code class="language-pascal">program primes(input, output);

const
   size = 8190;

var
   flags : array [0..size] of boolean;
   i, prime, k, count, iter : integer;
   ch: char;

begin
  writeln('Type Return'); readln(ch);
  writeln('10 iterations');
  for iter := 1 to 10 do
  begin
    count := 0;
    for i := 0 to size do
    begin
      flags[i] := true;
    end;

    for i := 0 to size do
    begin
      if flags[i] then
      begin
        prime := i + i + 3;
        k := i + prime;
        while k &lt;= size do
        begin
          flags[k] := false;
          k := k + prime;
        end;
        count := count + 1;
      end;
    end;

  end;
  writeln( count, ' primes');
end.
</code></pre>
<p>The code for the Prime Sieve in Turbo Modula-2:</p>
<pre><code class="language-pascal">MODULE primes;

CONST
  size = 8190;

VAR
  flags : ARRAY [ 0 .. size ] OF BOOLEAN;
  i, prime, k, count, iter : CARDINAL;
  ch : CHAR;

BEGIN
  WRITELN(&quot;Type Return&quot;); READLN(ch);
  WRITELN(&quot;10 iterations&quot;);
  FOR iter := 1 TO 10 DO
    count := 0;
    FOR i := 0 TO size DO flags[i] := TRUE END;
    FOR i := 0 TO size DO
      IF flags[i] THEN
        prime := i + i + 3;
        k := i + prime;
        WHILE k &lt;= size DO
          flags[k] := FALSE;
          k := k + prime;
        END;
        count := count + 1;
      END;
    END;
  END;
  WRITELN( count, &quot; primes&quot; );
END primes.
</code></pre>
<p>The following table shows the average results from running each test 10 times and timing their execution and build (compiling + linking).  This was performed under <a href="/articles/emulating-a-cpm-system-with-z80pack/">z80pack</a> running at 4Mhz and therefore doesn't allow for the increased disk access time of a real system.  For the TM-2 tests it also doesn't include the time to manually answer the questions required to build, instead it is just the processing time.</p>
<table class="neatTable">
  <tr><th>Compiler</th><th title="Total time processing during compiling and linking">Build</th><th title="Execution Time">Execution</th><th>Executable Size</th></tr>
  <tr><td>Turbo Modula-2 (M-Code)</td><td>6 Seconds</td><td>2 Minutes 8 Seconds</td><td>16Kb (123 records)</td></tr>
  <tr><td>Turbo Modula-2 (Native code)</td><td>9 Seconds</td><td>8 Seconds</td><td>16Kb (125 records)</td></tr>
  <tr><td>Turbo Pascal (Native code)</td><td>&lt; 1 second</td><td>24 Seconds</td><td>9Kb (67 records)</td></tr>
</table>
<p>Your can see from the table that there are trade-offs for each option and no-clear winner.  It therefore comes down to how the compiler will be used.  If you need very fast running code or have a large codebase then TM-2 will probably be a better choice.  However, if your program is smaller and doesn't need to run so quickly or you are happy to rely on assembler for extra speed, then you may find TP a better option.</p>
<h2>Should I Switch From Turbo Pascal to Turbo Modula-2?</h2>
<p>There is a <a href="http://oldcomputers.dyndns.org/public/pub/manuals/turbomodula2_bw.pdf">manual</a> available online, which while a poor scan, is certainly good enough to teach the language and TM-2 is similar enough to TP that it should be fairly easy to make the switch.  However, TM-2 is a bit of an unknown quantity when it comes to reliability and bugs, because not all that many people used it, compared to the huge number of Turbo Pascal users.  This also means that you are less likely to get help for TM-2 than TP.</p>
<p>However, if you feel brave, there are certainly big advantages to be gained from TM-2, especially with larger projects.  So why not download a <a href="http://www.retroarchive.org/cpm/lang/turbom2.zip">Turbo Modula-2 archive</a> from the retroarchive <a href="http://www.retroarchive.org/cpm/lang/lang.htm">programming languages</a> page and give it a go.  If you have used, or now choose to use TM-2, do leave a comment to share your experiences.</p>
      </div>
    </article>
</div>

<script>
  if (isUserFromUK()) {
    document.write(amznBanner);
  }
</script>

  <div id="cclicence">
    <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
      <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
    </a>
    <br />
    <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">If Only Borland Had Stuck With Turbo Modula-2 For CP/M</span>
    by <a xmlns:cc="http://creativecommons.org/ns#" href="https://techtinkering.com/2013/03/12/if-only-borland-had-stuck-with-turbo-modula-2-for-cpm/" property="cc:attributionName" rel="cc:attributionURL">Lawrence Woodman</a>
   is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
   
  </div>


  <div class="discuss">
    <h2 style="margin-top:0;">Share This Post</h2>
    <div class="contact">
  <ul>
    <li><a href="http://www.reddit.com/submit?url=https%3A%2F%2Ftechtinkering.com%2F2013%2F03%2F12%2Fif-only-borland-had-stuck-with-turbo-modula-2-for-cpm%2F&title=If%20Only%20Borland%20Had%20Stuck%20With%20Turbo%20Modula-2%20For%20CP%2FM" target="_blank" title="Submit to Reddit">Reddit</a></li>
    <li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftechtinkering.com%2F2013%2F03%2F12%2Fif-only-borland-had-stuck-with-turbo-modula-2-for-cpm%2F&quote=If%20Only%20Borland%20Had%20Stuck%20With%20Turbo%20Modula-2%20For%20CP%2FM" target="_blank" title="Share on Facebook">Facebook</a></li>
    <li><a href="https://twitter.com/intent/tweet?source=https%3A%2F%2Ftechtinkering.com%2F2013%2F03%2F12%2Fif-only-borland-had-stuck-with-turbo-modula-2-for-cpm%2F&text=If%20Only%20Borland%20Had%20Stuck%20With%20Turbo%20Modula-2%20For%20CP%2FM:%0Ahttps%3A%2F%2Ftechtinkering.com%2F2013%2F03%2F12%2Fif-only-borland-had-stuck-with-turbo-modula-2-for-cpm%2F&via=TechTinkering" target="_blank" title="Tweet">Twitter</a></li>
    <li><a href="mailto:?subject=If%20Only%20Borland%20Had%20Stuck%20With%20Turbo%20Modula-2%20For%20CP%2FM&body=I%20have%20written%20previously%20about%20why%20Turbo%20Pascal%20is%20a%20Great%20Choice%20For%20Programming%20Under%20CP%2FM%20and%20now%20it%20is%20time%20to%20talk%20about%20what%20could%20have%20been.%20%20You%20probably%20haven%27t%20heard%20of%20Turbo%20Modula-2%20for%20CP...:%0A%0Ahttps%3A%2F%2Ftechtinkering.com%2F2013%2F03%2F12%2Fif-only-borland-had-stuck-with-turbo-modula-2-for-cpm%2F" target="_blank" title="Send email">Email</a></li>
  </ul>
</div>

    <h2>Feedback/Discuss</h2>
    <div class="contact">
  <ul>


    <li><a href="mailto:techtinkering@vlifesystems.com?subject=Comment:%20If%20Only%20Borland%20Had%20Stuck%20With%20Turbo%20Modula-2%20For%20CP%2FM&body=Article%20URL:%20https%3A%2F%2Ftechtinkering.com%2F2013%2F03%2F12%2Fif-only-borland-had-stuck-with-turbo-modula-2-for-cpm%2F%0A" title="Send us an email">Email</a></li>
  </ul>
</div>
  </div>


    <div>
    <h2>Related Articles</h2>
    <div class="margin-buffer">
      <header>
  <h2><a href="/articles/the-pilot-programming-language-on-cpm/">The Pilot Programming Language on CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  Pilot was created by John A. Starkweather in the early 1960s as a programming language for Computer Assisted Instruction.  It has often been compared to Logo because of its use with children.  However,...
  &nbsp;
  <a class="readMore" href="/articles/the-pilot-programming-language-on-cpm/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/the-mouse-programming-language-on-cpm/">The Mouse Programming Language on CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  Mouse is an interpreted stack orientated language designed by Peter Grogono around 1975.  It was designed to be a small but powerful language for microcomputers, similar to Forth, but much simpler.  On...
  &nbsp;
  <a class="readMore" href="/articles/the-mouse-programming-language-on-cpm/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/2013/03/05/turbo-pascal-a-great-choice-for-programming-under-cpm/">Turbo Pascal: A Great Choice For Programming Under CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/pascal/">Pascal</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  CP/M was blessed with many programming languages, each with their own strengths and weaknesses.  I think that Turbo Pascal stands out from these and I'm not alone.  When Turbo Pascal was released in 19...
  &nbsp;
  <a class="readMore" href="/2013/03/05/turbo-pascal-a-great-choice-for-programming-under-cpm/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/2008/10/22/installing-the-hi-tech-z80-c-compiler-for-cpm/">Installing the HI-TECH Z80 C Compiler for CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/c/">C</a></li>
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
          <li>#<a href="/articles/tag/z80/">Z80</a></li>
      </ul>
  </span>
</header>
<div>
  My language of choice is C and I am currently getting more involved with the CP/M operating system.  I have therefore decided that it would be nice to have a C compiler working under CP/M.  There are a...
  &nbsp;
  <a class="readMore" href="/2008/10/22/installing-the-hi-tech-z80-c-compiler-for-cpm/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/2008/10/21/installing-zde-1-6-a-programmers-editor-for-cpm/">Installing ZDE 1.6, a programmers editor for CP/M</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/cpm/">CP/M</a></li>
          <li>#<a href="/articles/tag/editors/">Editors</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
      </ul>
  </span>
</header>
<div>
  To do any serious programming under CP/M, the first thing you need is a good programmers editor.  There aren't many in the archives, but I have tried most of them and found ZDE to be the best.  It is s...
  &nbsp;
  <a class="readMore" href="/2008/10/21/installing-zde-1-6-a-programmers-editor-for-cpm/">Read More</a>
</div>
<br />
</div>
    </div>

<script>
  if (isUserFromUK()) {
    document.write(amznBanner);
  }
</script>
    </div>

    <footer>
  <nav>
    <div class="container">
      <div>
        <strong>Legal:</strong>
        <a href="/terms/">T & C</a>, <a href="/privacy/">Privacy Policy</a>
        &nbsp;
        <strong>Misc:</strong>
        <a href="https://github.com/lawrencewoodman/techtinkering.com" title="Fork TechTinkering On GitHub ">GitHub</a>
        <script>
          if (isUserFromUK()) {
            document.write('<br /><strong>Disclosure:<' +'/strong> As an Amazon Associate TechTinkering earns from qualifying purchases.');
          }
        </script>
      </div>
    </div>
  </nav>
</footer>
  </body>
</html>