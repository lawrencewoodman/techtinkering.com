<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Tokenize/De-tokenize Commodore Basic Programs Using petcat</title>
  <meta name="description" content="petcat is a utility provided with the VICE Commodore emulator that you can use to convert Basic source code contained in ASCII text files to .PRG files or vice v">
  <meta name="keywords" content="Retro Vintage Programming Tinkering"/>

  <!-- *** Twitter Card *** -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@techtinkering">
  <meta name="twitter:title" content="Tokenize/De-tokenize Commodore Basic Programs Using petcat">
  <meta name="twitter:description" content="petcat is a utility provided with the VICE Commodore emulator that you can use to convert Basic source code contained in ASCII text files to .PRG files or vice v">
    <meta name="twitter:image"
         content="https://techtinkering.com/img/social_images/petcat_detokenize.png">
  <!-- *** Twitter Card *** -->

  <!-- *** Open Graph *** --->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Tokenize/De-tokenize Commodore Basic Programs Using petcat">
  <meta property="og:description" content="petcat is a utility provided with the VICE Commodore emulator that you can use to convert Basic source code contained in ASCII text files to .PRG files or vice v">
  <meta property="og:url" content="https://techtinkering.com/articles/tokenize-detokenize-commodore-basic-programs-using-petcat/">
    <meta property="og:image"
         content="https://techtinkering.com/img/social_images/petcat_detokenize.png">
  <!-- *** Open Graph *** --->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-4388762-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-4388762-2');
  </script>

  <script>
    function isUserFromUK() {
      return Intl.DateTimeFormat().resolvedOptions().timeZone != "Europe/London"
    }
  </script>

  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/article.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" rel="stylesheet" type="text/css" />
  <link rel="canonical" href="https://techtinkering.com/articles/tokenize-detokenize-commodore-basic-programs-using-petcat/">
  <link rel="alternate" type="application/rss+xml" title="TechTinkering - Retro Computers, Programming, General Technical Tinkering"
        href="https://feedproxy.google.com/TechTinkering" />

	<!-- ****** faviconit.com favicons ****** -->
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<!-- ****** faviconit.com favicons ****** -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>

  <script>
    if (isUserFromUK()) {
      console.log("No Google ADs - UK user");
    } else {
      console.log("Google ADs - not from uk");
      document.write('<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"><' + '/script>');
    }
  </script>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <script>
    // Cookie Consent - https://cookieconsent.insites.com
    window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#252e39"
        },
        "button": {
          "background": "#14a7d0"
        }
      },
      "theme": "classic",
      "position": "top",
      "static": true,
      "content": {
        "message": "TechTinkering uses cookies for advertising, analytics, etc.",
        "href": "https://techtinkering.com/privacy/"
      }
    })});
  </script>

  <script>
    if (isUserFromUK()) {
      console.log("No Google Ads - uk user");
    } else {
      console.log("Google Ads - non-uk user");
      (adsbygoogle = window.adsbygoogle || []).push({
           google_ad_client: "ca-pub-1613732348909658",
           enable_page_level_ads: true
      });
    }
  </script>

  <script>
    if (isUserFromUK()) {
      console.log("Amazon Banner - from uk");
      // Amazon Prime Video Banner 728x90 and 300x250
      amznBanner='<div class="amazonBannerDesktop"><iframe src="https://rcm-eu.amazon-adsystem.com/e/cm?o=2&p=48&l=ur1&category=piv&banner=0E183RXMV88X6J8GJ002&f=ifr&linkID=a2c37aae0561f075af3356504493bdf0&t=techtinkering-21&tracking_id=techtinkering-21" width="728" height="90" scrolling="no" border="0" marginwidth="0" style="border:none;" frameborder="0" sandbox="allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation"><' + '/iframe><' +'/div><div class="amazonBannerMobile"><iframe src="https://rcm-eu.amazon-adsystem.com/e/cm?o=2&p=12&l=ur1&category=piv&banner=070GKT77WVHAHSRTHK02&f=ifr&linkID=0dc57b53bcc8f7ab67a385d51155e57a&t=techtinkering-21&tracking_id=techtinkering-21" width="300" height="250" scrolling="no" border="0" marginwidth="0" style="border:none;" frameborder="0" sandbox="allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation"><' + '/iframe><' + '/div>';
    }
  </script>
</head>
  <body>
    <nav>
  <div class="container">
    <div class="navbar-header">
      <a href="/">TechTinkering</a><br />
      =============
    </div>

    <div class="contact">
      <ul>
        <li>
          <a href="https://twitter.com/TechTinkering" title="@TechTinkering on Twitter">Twitter</a>
        </li>
        <li>
          <a href="https://youtube.com/techtinkering" title="TechTinkering's YouTube Channel">YouTube</a>
        </li>
        <li>
          <a href="https://feeds.feedburner.com/TechTinkering" title="Subscribe to our RSS Feed">RSS</a>
        </li>
        <li>
          <a href="mailto:techtinkering@vlifesystems.com" title="Email us, we'd love to hear from you">Email</a>
        </li>
        <li>
          <a href="/useful-links/" title="Useful vintage computer links">Useful Links</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div id="content" class="container">
      <div class="margin-buffer">
    <article itemscope itemtype="http://schema.org/BlogPosting">
    <meta itemprop="image"
         content="https://techtinkering.com/img/social_images/petcat_detokenize.png" />
      <header>
        <a href="/articles/tokenize-detokenize-commodore-basic-programs-using-petcat/" title="Tokenize/De-tokenize Commodore Basic Programs Using petcat">
          <h1 itemprop="headline name">Tokenize/De-tokenize Commodore Basic Programs Using petcat</h1>
        </a>
        <div>
            <time itemprop="datePublished"
                  datetime="2019-11-21">
              21 November 2019
            </time>
          <span itemscope itemprop="publisher"
                itemtype="http://schema.org/Organization">
            <meta itemprop="name" content="TechTinkering" />
            <meta itemprop="url" content="https://techtinkering.com" />
          </span>
          <span itemscope itemprop="author" itemtype="http://schema.org/Person">
            <a rel="author" itemprop="url" href="https://lawrencewoodman.github.io">
              <span itemprop="name">Lawrence Woodman</span>
            </a>
          </span>

          <ul class="tags">
              <li>#<a href="/articles/tag/basic/">BASIC</a></li>
              <li>#<a href="/articles/tag/commodore/">Commodore</a></li>
              <li>#<a href="/articles/tag/programming/">Programming</a></li>
              <li>#<a href="/articles/tag/retro/">Retro</a></li>
          </ul>
        </div>
      </header>
        <div itemprop="articleBody">
        <p>petcat is a utility provided with the <a href="http://vice-emu.sourceforge.net/">VICE</a> Commodore emulator that you can use to convert Basic source code contained in ASCII text files to .PRG files or vice versa.  It is also able to convert ASCII text files to and from PETSCII .SEQ files.  This makes it a great utility for cross-development purposes.</p>
<h2>Convert Basic Source Code in an ASCII Text File to a .PRG File</h2>
<p>If the input file is Basic source code stored as an ASCII file then petcat will tokenize this to create a .PRG file as its output.  Blank lines will be ignored, but the Basic keywords should be in lowercase because of they way that Commodore Basic stores them.  If, for example, you used <code>lI</code> in your Basic source code it would be converted to <code>list</code>.</p>
<p>In the following example we specify tokenizing with Basic v7.0 using the <code>-w70</code> switch and the output file with <code>-o program.prg</code>.  The <code>--</code> switch tells petcat to stop processing command line switches and the file to convert is <code>program.bas</code> at the end.</p>
<pre><code class="language-text">$ petcat -w70 -o program.prg -- program.bas
</code></pre>
<h2>Convert a .PRG File to an ASCII Text File</h2>
<p>If the input file is a .PRG file then petcat will de-tokenize this to create an ASCII text file as its output.</p>
<p>In the following example we specify de-tokenizing Basic v2.0 using the <code>-2</code> switch and the output file with <code>-o program.bas</code>.  The <code>--</code> switch tells petcat to stop processing command line switches and the file to convert is <code>program.prg</code> at the end.</p>
<pre><code class="language-text">$ petcat -2 -o program.bas -- program.prg
</code></pre>
<h2>Basic Versions</h2>
<p>petcat supports many different flavours of Basic that came as standard with 8-bit Commodore computers as well many extended and alternative Basics.  Further options are listed in the <a href="http://vice-emu.sourceforge.net/vice_15.html">VICE manual</a>.  Below are the options used to specify the standard flavours of Basic.  These are used after the <code>-w</code> switch if you want to tokenize and without if you want to de-tokenize.</p>
<table class="neatTable">
  <tr><th>Option</th><th>Version</th><th>Computers</th></tr>
  <tr><td>1p</td><td>Basic v1.0</td><td>PET</td></tr>
  <tr><td>2</td><td>Basic v2.0</td><td>C64/VIC20/PET</td></tr>
  <tr><td>3</td><td>Basic v3.5</td><td>C16/C116/Plus/4</td></tr>
  <tr><td>40</td><td>Basic v4.0</td><td>PET/CBM2</td></tr>
  <tr><td>70</td><td>Basic v7.0</td><td>C128</td></tr>
</table>
<h2>Unprintable / Special Characters</h2>
<p>Commodore Basic programs can contain characters that aren't printable in ASCII, so petcat uses a set of mnemonics to encode these.  Below are some of the most commonly used.</p>
<table class="neatTable">
  <tr><th>Mnemonic</th><th>Explanation</th></tr>
  <tr><td>{blk}</td><td>Colour: black</td></tr>
  <tr><td>{wht}</td><td>Colour: white</td></tr>
  <tr><td>{red}</td><td>Colour: red</td></tr>
  <tr><td>{cyn}</td><td>Colour: cyan</td></tr>
  <tr><td>{pur}</td><td>Colour: purple</td></tr>
  <tr><td>{grn}</td><td>Colour: green</td></tr>
  <tr><td>{blu}</td><td>Colour: blue</td></tr>
  <tr><td>{yel}</td><td>Colour: yellow</td></tr>
  <tr><td>{orng}</td><td>Colour: orange</td></tr>
  <tr><td>{brn}</td><td>Colour: brown</td></tr>
  <tr><td>{lred}</td><td>Colour: light red</td></tr>
  <tr><td>{lgrn}</td><td>Colour: light green</td></tr>
  <tr><td>{lblu}</td><td>Colour: light blue</td></tr>
  <tr><td>{gry1}</td><td>Colour: grey1</td></tr>
  <tr><td>{gry2}</td><td>Colour: grey2</td></tr>
  <tr><td>{gry3}</td><td>Colour: grey3</td></tr>
  <tr><td>{rvon}</td><td>Control: reverse on</td></tr>
  <tr><td>{rvof}</td><td>Control: reverse off</td></tr>
  <tr><td>{clr}</td><td>Control: clear screen</td></tr>
  <tr><td>{home}</td><td>Control: home</td></tr>
  <tr><td>{inst}</td><td>Control: insert</td></tr>
  <tr><td>{del}</td><td>Control: delete</td></tr>
  <tr><td>{up}</td><td>Cursor: up</td></tr>
  <tr><td>{down}</td><td>Cursor: down</td></tr>
  <tr><td>{left}</td><td>Cursor: left</td></tr>
  <tr><td>{rght}</td><td>Cursor: right</td></tr>
</table>
<h3>Example Using the Mnemonics</h3>
<p>The following example clears the screen using the <code>{clr}</code> mnemonic and then prints a line of black text using <code>{blk}</code> followed by a line of red text using <code>{red}</code>, finally it finishes the program by changing the text colour to blue using <code>{blu}</code>.</p>
<pre><code class="language-basic">10 print &quot;{clr}&quot;
20 print &quot;{blk}this text is black&quot;
30 print &quot;{red}this text is red&quot;
40 print &quot;{blu}&quot;
</code></pre>
<h2>Autostarting a .PRG in VICE</h2>
<p>VICE allows you to autostart a .PRG file by putting it on the command-line.  You may need to use the <code>-basicload</code> switch (depending on how <code>AutostartBasicLoad</code> is set in your config) to load it using <code>,8</code> instead of <code>,8,1</code>.  The following will autostart the basic program, <code>program.prg</code>, using VICE's VIC-20 emulator.</p>
<pre><code class="language-text">$ xvic -basicload program.prg &amp;
</code></pre>
<h2>Video Demonstrating petcat</h2>
<p>You can see petcat being used in the following video:</p>
<div class="youtube-wrapper">
<iframe width="560" height="315" src="https://www.youtube.com/embed/MZHS4qVfmvc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
      </div>
    </article>
</div>

<script>
  if (isUserFromUK()) {
    document.write(amznBanner);
  }
</script>

  <div id="cclicence">
    <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
      <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
    </a>
    <br />
    <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Tokenize/De-tokenize Commodore Basic Programs Using petcat</span>
    by <a xmlns:cc="http://creativecommons.org/ns#" href="https://techtinkering.com/articles/tokenize-detokenize-commodore-basic-programs-using-petcat/" property="cc:attributionName" rel="cc:attributionURL">Lawrence Woodman</a>
   is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
   
  </div>


  <div class="discuss">
    <h2 style="margin-top:0;">Share This Post</h2>
    <div class="contact">
  <ul>
    <li><a href="http://www.reddit.com/submit?url=https%3A%2F%2Ftechtinkering.com%2Farticles%2Ftokenize-detokenize-commodore-basic-programs-using-petcat%2F&title=Tokenize%2FDe-tokenize%20Commodore%20Basic%20Programs%20Using%20petcat" target="_blank" title="Submit to Reddit">Reddit</a></li>
    <li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftechtinkering.com%2Farticles%2Ftokenize-detokenize-commodore-basic-programs-using-petcat%2F&quote=Tokenize%2FDe-tokenize%20Commodore%20Basic%20Programs%20Using%20petcat" target="_blank" title="Share on Facebook">Facebook</a></li>
    <li><a href="https://twitter.com/intent/tweet?source=https%3A%2F%2Ftechtinkering.com%2Farticles%2Ftokenize-detokenize-commodore-basic-programs-using-petcat%2F&text=Tokenize%2FDe-tokenize%20Commodore%20Basic%20Programs%20Using%20petcat:%0Ahttps%3A%2F%2Ftechtinkering.com%2Farticles%2Ftokenize-detokenize-commodore-basic-programs-using-petcat%2F&via=TechTinkering" target="_blank" title="Tweet">Twitter</a></li>
    <li><a href="mailto:?subject=Tokenize%2FDe-tokenize%20Commodore%20Basic%20Programs%20Using%20petcat&body=petcat%20is%20a%20utility%20provided%20with%20the%20VICE%20Commodore%20emulator%20that%20you%20can%20use%20to%20convert%20Basic%20source%20code%20contained%20in%20ASCII%20text%20files%20to%20.PRG%20files%20or%20vice%20versa.%20%20It%20is%20also%20able%20to%20convert%20ASCII%20...:%0A%0Ahttps%3A%2F%2Ftechtinkering.com%2Farticles%2Ftokenize-detokenize-commodore-basic-programs-using-petcat%2F" target="_blank" title="Send email">Email</a></li>
  </ul>
</div>

    <h2>Feedback/Discuss</h2>
    <div class="contact">
  <ul>


    <li><a href="mailto:techtinkering@vlifesystems.com?subject=Comment:%20Tokenize%2FDe-tokenize%20Commodore%20Basic%20Programs%20Using%20petcat&body=Article%20URL:%20https%3A%2F%2Ftechtinkering.com%2Farticles%2Ftokenize-detokenize-commodore-basic-programs-using-petcat%2F%0A" title="Send us an email">Email</a></li>
  </ul>
</div>
  </div>


    <div>
    <h2>Related Articles</h2>
    <div class="margin-buffer">
      <header>
  <h2><a href="/articles/getting-the-address-of-basic-variables-on-the-vic-20/">Getting the Address of BASIC Variables on the VIC-20</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/assembly/">Assembly</a></li>
          <li>#<a href="/articles/tag/basic/">BASIC</a></li>
          <li>#<a href="/articles/tag/commodore/">Commodore</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
          <li>#<a href="/articles/tag/vic-20/">VIC-20</a></li>
      </ul>
  </span>
</header>
<div>
  Getting the address of a BASIC variable can be useful if you want to pass data to a machine code routine or want to access the bytes of a variable directly to improve speed and reduce garbage collectio...
  &nbsp;
  <a class="readMore" href="/articles/getting-the-address-of-basic-variables-on-the-vic-20/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/saving-and-loading-memory-on-the-vic-20/">Saving and Loading Memory on the VIC-20</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/assembly/">Assembly</a></li>
          <li>#<a href="/articles/tag/basic/">BASIC</a></li>
          <li>#<a href="/articles/tag/commodore/">Commodore</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
          <li>#<a href="/articles/tag/vic-20/">VIC-20</a></li>
      </ul>
  </span>
</header>
<div>
  Saving and loading memory is quite easy on the VIC-20 once you know how.  However, it isn't obvious how to do this and therefore this article will present a few simple ways of doing it from BASIC and A...
  &nbsp;
  <a class="readMore" href="/articles/saving-and-loading-memory-on-the-vic-20/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/basic-line-storage-on-the-vic-20/">Basic Line Storage on the VIC-20</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/basic/">BASIC</a></li>
          <li>#<a href="/articles/tag/commodore/">Commodore</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
          <li>#<a href="/articles/tag/vic-20/">VIC-20</a></li>
      </ul>
  </span>
</header>
<div>
  BASIC programs are stored in memory using a simple structure that we can investigate and manipulate.  This article will show how they are stored and contains a BASIC program to go through each line of ...
  &nbsp;
  <a class="readMore" href="/articles/basic-line-storage-on-the-vic-20/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/storing-machine-code-in-rem-statements-on-the-vic-20/">Storing Machine Code in REM Statements on the VIC-20</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/assembly/">Assembly</a></li>
          <li>#<a href="/articles/tag/basic/">BASIC</a></li>
          <li>#<a href="/articles/tag/commodore/">Commodore</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
          <li>#<a href="/articles/tag/vic-20/">VIC-20</a></li>
      </ul>
  </span>
</header>
<div>
  BASIC programs often contain machine code routines but they take up quite a lot of space in BASIC.  An interesting way to reduce the amount of space that they take is to store the machine code in REM s...
  &nbsp;
  <a class="readMore" href="/articles/storing-machine-code-in-rem-statements-on-the-vic-20/">Read More</a>
</div>
<br />
      <header>
  <h2><a href="/articles/adding-basic-stubs-to-assembly-language-on-the-commodore-vic-20/">Adding Basic Stubs to Assembly Language on the Commodore VIC-20</a></h2>
  <span class="post-meta">
      <ul class="tags">
          <li>#<a href="/articles/tag/assembly/">Assembly</a></li>
          <li>#<a href="/articles/tag/basic/">BASIC</a></li>
          <li>#<a href="/articles/tag/commodore/">Commodore</a></li>
          <li>#<a href="/articles/tag/programming/">Programming</a></li>
          <li>#<a href="/articles/tag/retro/">Retro</a></li>
          <li>#<a href="/articles/tag/vic-20/">VIC-20</a></li>
      </ul>
  </span>
</header>
<div>
  To make machine language programs more friendly it's nice to add a Basic stub which contains a line with a SYS statement to start the code.  This is easy to do on the VIC-20 and the process gives you a...
  &nbsp;
  <a class="readMore" href="/articles/adding-basic-stubs-to-assembly-language-on-the-commodore-vic-20/">Read More</a>
</div>
<br />
</div>
    </div>

<script>
  if (isUserFromUK()) {
    document.write(amznBanner);
  }
</script>

    </div>

    <footer>
  <nav>
    <div class="container">
      <div>
        <script>
          if (isUserFromUK()) {
            document.write('<strong>Disclosure:<' +'/strong> As an Amazon Associate TechTinkering earns from qualifying purchases.<br />');
          }
        </script>
        <strong>Legal:</strong>
        <a href="/terms/">T & C</a>, <a href="/privacy/">Privacy Policy</a>
        &nbsp;
        <strong>Misc:</strong>
        <a href="https://github.com/lawrencewoodman/techtinkering.com" title="Fork TechTinkering On GitHub ">GitHub</a>
      </div>
    </div>
  </nav>
</footer>
  </body>
</html>