<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>A Jekyll Plugin to Display Ratings as Star Images</title>
  <meta name="description" content="I have been using Jekyll a lot recently on the Trust a Friend website and found the need to display a rating as a series of stars.  Initially I implemented this ">
  <meta name="keywords" content="Retro Vintage Programming Tinkering"/>

  <!-- *** Twitter Card *** -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@techtinkering">
  <meta name="twitter:title" content="A Jekyll Plugin to Display Ratings as Star Images">
  <meta name="twitter:description" content="I have been using Jekyll a lot recently on the Trust a Friend website and found the need to display a rating as a series of stars.  Initially I implemented this ">
  <!-- *** Twitter Card *** -->

  <!-- *** Open Graph *** --->
  <meta property="og:type" content="website">
  <meta property="og:title" content="A Jekyll Plugin to Display Ratings as Star Images">
  <meta property="og:description" content="I have been using Jekyll a lot recently on the Trust a Friend website and found the need to display a rating as a series of stars.  Initially I implemented this ">
  <meta property="og:url" content="http://techtinkering.com/2011/02/15/a-jekyll-plugin-to-display-ratings-as-star-images/">
  <!-- *** Open Graph *** --->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-4388762-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-4388762-2');
  </script>

  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/prism.css" rel="stylesheet">
  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/extra.css" rel="stylesheet">
  <link href="/css/article.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" rel="stylesheet" type="text/css" />
  <link rel="canonical" href="http://techtinkering.com/2011/02/15/a-jekyll-plugin-to-display-ratings-as-star-images/">
  <link rel="alternate" type="application/rss+xml" title="TechTinkering - Retro Computers, Programming, General Technical Tinkering"
        href="http://feedproxy.google.com/TechTinkering" />

	<!-- ****** faviconit.com favicons ****** -->
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<!-- ****** faviconit.com favicons ****** -->

  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

  <script src="/js/jquery-3.3.1.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/prism.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <script>
    // Cookie Consent - https://cookieconsent.insites.com
    window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#252e39"
        },
        "button": {
          "background": "#14a7d0"
        }
      },
      "theme": "classic",
      "position": "top",
      "static": true,
      "content": {
        "message": "TechTinkering uses cookies for advertising, analytics, etc.",
        "href": "http://techtinkering.com/privacy/"
      }
    })});
  </script>

  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
         google_ad_client: "ca-pub-1613732348909658",
         enable_page_level_ads: true
    });
  </script>
</head>
  <body>
    <nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">TechTinkering</a>
    </div>

    <div id="navbar" class="collapse navbar-collapse navbar-right">
      <ul class="nav navbar-nav navbar-right contact-buttons">
        <li>
          <!-- From: http://www.buttonshut.com/Get-Button-Huts-Code/Twitter-Buttons-1124.html -->
          <a href="http://twitter.com/TechTinkering" title="@TechTinkering on Twitter">
            <img class="bannerIcon" src="/images/twitter-button-36.png" alt="@techtinkering on Twitter"/>
          </a>
        </li>
        <li>
          <!-- From: http://www.buttonshut.com/Get-Button-Huts-Code/Youtube-Buttons-831.html -->
          <a href="http://youtube.com/techtinkering" title="TechTinkering's YouTube Channel">
            <img class="bannerIcon" src="/images/youtube-small-square-32.png" alt="YouTube Channel"/>
          </a>
        </li>
        <li>
          <!-- From: http://www.graphicsfuel.com/2011/05/email-icon-psd/ -->
          <a href="mailto:techtinkering@vlifesystems.com" title="Email us, we'd love to hear from you">
            <img class="bannerIcon" src="/images/email.png" alt="Email"/>
          </a>
        </li>
        <li>
          <a href="https://github.com/lawrencewoodman/techtinkering.com" title="Fork TechTinkering On Github ">
            <img class="bannerIcon" src="/images/octocat_fluid.png" alt="Techtinkering Repo on  Github"/>
          </a>
        </li>
        <li>
          <a href="http://feeds.feedburner.com/TechTinkering" title="Subscribe to our RSS Feed">
            <img class="bannerIcon" src="/images/feed-icon-28x28.png" alt="RSS Feed"/>
          </a>
        </li>
      </ul>

    </div><!--/.nav-collapse -->
  </div>
</nav>
    <div id="content" class="container">
      <div class="row margin-buffer">
  <div class="col-md-12">
    <article itemscope itemtype="http://schema.org/BlogPosting">
      <header>
        <a href="/2011/02/15/a-jekyll-plugin-to-display-ratings-as-star-images/" title="A Jekyll Plugin to Display Ratings as Star Images">
          <h1 itemprop="headline name">A Jekyll Plugin to Display Ratings as Star Images</h1>
        </a>
        <div class="pull-right">
          <ul class="share-buttons">
  <li><a href="https://twitter.com/intent/tweet?source=http%3A%2F%2Ftechtinkering.com&text=:%20http%3A%2F%2Ftechtinkering.com&via=TechTinkering" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.title) + ':%20'  + encodeURIComponent(document.URL)); return false;"><img alt="Tweet" src="/img/social_flat_rounded_rects_svg/Twitter.svg" /></a></li>
  <li><a href="http://www.reddit.com/submit?url=http%3A%2F%2Ftechtinkering.com&title=" target="_blank" title="Submit to Reddit" onclick="window.open('http://www.reddit.com/submit?url=' + encodeURIComponent(document.URL) + '&title=' +  encodeURIComponent(document.title)); return false;"><img alt="Submit to Reddit" src="/img/social_flat_rounded_rects_svg/Reddit.svg" /></a></li>
  <li><a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Ftechtinkering.com&quote=" title="Share on Facebook" target="_blank" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.URL) + '&quote=' + encodeURIComponent(document.URL)); return false;"><img alt="Share on Facebook" src="/img/social_flat_rounded_rects_svg/Facebook.svg" /></a></li>
  <li><a href="mailto:?subject=&body=:%20http%3A%2F%2Ftechtinkering.com" target="_blank" title="Send email" onclick="window.open('mailto:?subject=' + encodeURIComponent(document.title) + '&body=' +  encodeURIComponent(document.URL)); return false;"><img alt="Send email" src="/img/social_flat_rounded_rects_svg/Email.svg" /></a></li>
</ul>
        </div>
          <time itemprop="datePublished"
                datetime="2011-02-15">
            15 February 2011
          </time>
          &nbsp; / &nbsp;
        <span itemscope itemprop="publisher"
              itemtype="http://schema.org/Organization">
          <meta itemprop="name" content="TechTinkering" />
          <meta itemprop="url" content="http://techtinkering.com" />
        </span>
        <span itemscope itemprop="author" itemtype="http://schema.org/Person">
          <a rel="author" itemprop="url" href="https://lawrencewoodman.github.io">
            <span itemprop="name">Lawrence Woodman</span>
          </a>
        </span>
        &nbsp; / &nbsp;
          <a href="/articles/tag/jekyll/">Jekyll</a>
          &nbsp; &nbsp;
          <a href="/articles/tag/liquid/">Liquid</a>
          &nbsp; &nbsp;
          <a href="/articles/tag/ruby/">Ruby</a>
          &nbsp; &nbsp;
          <a href="/articles/tag/webdevelopment/">Web Development</a>
          &nbsp; &nbsp;
      </header>
      <br />
      <div itemprop="articleBody">
        <p>I have been using <a href="http://jekyllrb.com/">Jekyll</a> a lot recently on the <a href="http://trustafriend.com">Trust a Friend</a> website and found the need to display a rating as a series of stars.  Initially I implemented this in JavaScript, which worked fine, but I like to limit the amount of JavaScript on my sites.  I could have done this with some straight <em>Liquid</em> but it would have been quite messy, so I decided to write a plugin for Jekyll.</p>
<h2>The Code</h2>
<p>I had never programmed in Ruby before writing this plugin, so I'm sure it isn't written in the best Ruby style, but it works and therefore I think it is worth sharing.  The code consists of an additional definition to the Filters module to provide a filter called <code>star_rating</code>.  The latest version of the code can be found under my <a href="http://github.com/LawrenceWoodman">GitHub</a> account in the <a href="https://github.com/LawrenceWoodman/star_rating-liquid_filter">star_rating-liquid_filter</a> repository.</p>
<p>At the time of writing, the <strong>star_rating.filter.rb</strong> plugin file looks like the following:</p>
<pre><code class="language-ruby">######################################################################
# A filter plugin for Jekyll to display ratings as a series
# of nought to five star images.
#---------------------------------------------------------------------
# License:
# Copyright (c) 2011, Lawrence Woodman
# All rights reserved.
#
# Redistribution and use in source and binary forms, with or
# without modification, are permitted provided that the following
# conditions are met:
#
#    * Redistributions of source code must retain the above
#      copyright notice, this list of conditions and the following
#      disclaimer.
#    * Redistributions in binary form must reproduce the above
#      copyright notice, this list of conditions and the following
#      disclaimer in the documentation and/or other materials
#      provided with the distribution.
#
# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
# &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
# LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
# FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
# COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
# INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
# BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
# LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
# CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
# ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
# POSSIBILITY OF SUCH DAMAGE.
######################################################################

module Jekyll
  module Filters

    # Location of the star images from root of website
    Star_imagesLoc = &quot;/images&quot;

    # The format of the img tag used by % method
    Star_imageTag = &quot;&lt;img src=\&quot;#{Star_imagesLoc}/%s\&quot; alt=\&quot;%s\&quot; \&gt;&quot;

    # Displays the rating as a series of stars
    def star_rating(rating)

      wholeStars = rating.floor
      if (rating - wholeStars &gt; 0.5)
        wholeStars += 1
      end
      halfStar = (rating - wholeStars == 0.5 ? 1 : 0)
      clearStars = 5 - (wholeStars + halfStar)

      ratingAltText = &quot;%.1f/5.0&quot; % [rating]

      htmlOutput = String.new
      wholeStars.times do
        htmlOutput += Star_imageTag % [&quot;star_filled.png&quot;, &quot;#{ratingAltText}&quot;]
        ratingAltText = &quot;&quot;
      end

      if (halfStar == 1)
        htmlOutput += Star_imageTag % [&quot;star_half.png&quot;, &quot;#{ratingAltText}&quot;]
        ratingAltText = &quot;&quot;
      end

      clearStars.times do
        htmlOutput += Star_imageTag % [&quot;star_clear.png&quot;, &quot;#{ratingAltText}&quot;]
        ratingAltText = &quot;&quot;
      end

      return htmlOutput
    end
  end
end
</code></pre>
<h2>Installation</h2>
<p>Please refer to the instructions in the repository, but to give you an idea of
how easy it is, here are the current instructions:
<em>Please look at the <a href="https://github.com/LawrenceWoodman/star_rating-liquid_filter/blob/master/README.md">star_rating-liquid_filter README</a> for the latest instructions.</em></p>
<ol>
<li>Download the latest version of the plugin from the <a href="https://github.com/LawrenceWoodman/star_rating-liquid_filter">star_rating-liquid_filter</a> repository</li>
<li>Copy <code>star_rating.filter.rb</code> to your <code>_plugins</code> directory</li>
<li>Copy the contents of <code>images</code> to your <code>images</code> directory</li>
</ol>
<h2>Using the Filter</h2>
<p>If you had a variable such as <code>page.rating</code> then you could put <code>{{ page.rating|star_rating }}</code> in your text and the relevant number of images would be displayed.</p>
<h2>Final Thoughts</h2>
<p>This filter will continue to be updated so please go to see it's github <a href="https://github.com/LawrenceWoodman/star_rating-liquid_filter">repo</a> for the latest version.  I was pleased with how quick and easy it was to write plugins for Jekyll and it has given me ideas for all sorts of plugins which could aid my Jekyll use.  While writing the plugin, I had to skim a few Ruby tutorials to start learning the language.  During this I fell in love with the beauty and elegance of Ruby and intend to learn it properly very shortly.  For the type of work that I do, I can see how it will give me a good productivity boost and from what I have seen so far, even make programming more fun.</p>
      </div>
    </article>
  </div>
</div>

  <div class="row">
    <div class="col-md-12">
      <div id="cclicence">
        <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
          <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
        </a>
        <br />
        <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">A Jekyll Plugin to Display Ratings as Star Images</span>
        by <a xmlns:cc="http://creativecommons.org/ns#" href="http://techtinkering.com/2011/02/15/a-jekyll-plugin-to-display-ratings-as-star-images/" property="cc:attributionName" rel="cc:attributionURL">Lawrence Woodman</a>
       is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
      </div>
    </div>
  </div>

    <div class="row">
      <div class="col-md-12">
        <h2>Related Articles</h2>
      </div>
    </div>
    <div class="row margin-buffer">
  <div class="col-md-12">
      <header>
  <h3><a href="/2011/08/17/improving-related-posts-on-jekyll/">Improving the related_posts feature of jekyll</a></h3>
  <span class="post-meta">
      <time datetime="2011-08-17">
        17 August 2011
      </time>
      &nbsp; / &nbsp;
      <a href="/articles/tag/jekyll/">Jekyll</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/ruby/">Ruby</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/webdevelopment/">Web Development</a>
      &nbsp; &nbsp;
  </span>
</header>
<div>
  Now that I have converted TechTinkering over to Jekyll, I have come up against a bit of a problem with site.related_posts: The results are always just the latest posts, and are not filtered or ordered ...
  &nbsp;
  <a class="readMore" href="/2011/08/17/improving-related-posts-on-jekyll/">Read More</a>
</div>
      <header>
  <h3><a href="/2011/09/08/pisceans-and-october-babies-more-likely-to-become-poets/">Pisceans and October Babies More Likely to Become Poets.  Scraping Wikipedia Reveals All</a></h3>
  <span class="post-meta">
      <time datetime="2011-09-08">
         8 September 2011
      </time>
      &nbsp; / &nbsp;
      <a href="/articles/tag/javascript/">JavaScript</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/ruby/">Ruby</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/webscraping/">Web Scraping</a>
      &nbsp; &nbsp;
  </span>
</header>
<div>
  This is the second in a series of articles looking into whether when you were born affects your future.  In the previous article I looked at Nobel laureates, which are, of course, from a range of field...
  &nbsp;
  <a class="readMore" href="/2011/09/08/pisceans-and-october-babies-more-likely-to-become-poets/">Read More</a>
</div>
      <header>
  <h3><a href="/2011/08/24/does-when-you-were-born-affect-your-chance-of-becoming-a-nobel-laureate/">Does When You Were Born Affect Your Chance of Becoming a Nobel Laureate? Scraping Wikipedia to Find Out</a></h3>
  <span class="post-meta">
      <time datetime="2011-08-24">
        24 August 2011
      </time>
      &nbsp; / &nbsp;
      <a href="/articles/tag/ruby/">Ruby</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/webscraping/">Web Scraping</a>
      &nbsp; &nbsp;
  </span>
</header>
<div>
  There has been a lot of talk in the UK recently about whether when you were born affects your schooling.  Lots of teachers have noticed how pupils born at the end of the Summer often struggle compared ...
  &nbsp;
  <a class="readMore" href="/2011/08/24/does-when-you-were-born-affect-your-chance-of-becoming-a-nobel-laureate/">Read More</a>
</div>
      <header>
  <h3><a href="/2011/04/16/mida-a-microdata-parser-extractor-library-for-ruby/">Mida - A Microdata parser/extractor library for Ruby</a></h3>
  <span class="post-meta">
      <time datetime="2011-04-16">
        16 April 2011
      </time>
      &nbsp; / &nbsp;
      <a href="/articles/tag/library/">Library</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/microdata/">Microdata</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/ruby/">Ruby</a>
      &nbsp; &nbsp;
  </span>
</header>
<div>
  I have recently released Mida as a Gem for parsing/extracting Microdata from web pages.  Not many sites at the moment are using Microdata, in fact, apart from this site, I only know of one other: Trust...
  &nbsp;
  <a class="readMore" href="/2011/04/16/mida-a-microdata-parser-extractor-library-for-ruby/">Read More</a>
</div>
      <header>
  <h3><a href="/2008/09/16/how-to-share-an-ssl-certificate-and-still-use-cookies/">How to share an SSL certificate and still use cookies</a></h3>
  <span class="post-meta">
      <time datetime="2008-09-16">
        16 September 2008
      </time>
      &nbsp; / &nbsp;
      <a href="/articles/tag/php/">PHP</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/programming/">Programming</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/ssl/">SSL</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/security/">Security</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/webdevelopment/">Web Development</a>
      &nbsp; &nbsp;
  </span>
</header>
<div>
  Website hosting companies often provide a shared SSL certificate, but this presents the web designer with the problem of how to use it for a site that uses cookies.  I have read many people say that th...
  &nbsp;
  <a class="readMore" href="/2008/09/16/how-to-share-an-ssl-certificate-and-still-use-cookies/">Read More</a>
</div>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <form id="email-subscribe" action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=TechTinkering', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
  <p>Sign up to get new articles straight to your inbox.</p>
  <p><input type="text" style="width:180px" name="email" placeholder="Email address"/>
  <input type="hidden" value="TechTinkering" name="uri"/>
  <input type="hidden" name="loc" value="en_US"/>
  <input class="subscribe-button" type="submit" value="Subscribe" /></p>
  <p>Delivered by <a href="https://feedburner.google.com" target="_blank">FeedBurner</a></p>
</form>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <h2>Comments</h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'techtinkering';
      var disqus_identifier = '/2011/02/15/a-jekyll-plugin-to-display-ratings-as-star-images/';
      var disqus_url = 'http://techtinkering.com/2011/02/15/a-jekyll-plugin-to-display-ratings-as-star-images/';

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="https://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</div>
    </div>

    <footer>
  <nav class="navbar navbar-default">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <strong>Legal:</strong> &nbsp;
          <a href="/terms/">T & C</a>, &nbsp; &nbsp;
          <a href="/privacy/">Privacy Policy</a>
        </div>
      </div>
    </div>
  </nav>
</footer>
  </body>
</html>